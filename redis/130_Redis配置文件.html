
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Redis配置文件 · 我的数据库管理手册电子书</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Mars丶小石头 <bjddd192@163.com>">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro-kui/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="131_我的常用配置文件.html" />
    
    
    <link rel="prev" href="120_Redis单机部署.html" />
    

    
        <link rel="shortcut icon" href='../favicon.ico' type="image/x-icon">
    
    
        <link rel="bookmark" href='../favicon.ico' type="image/x-icon">
    
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    我的数据库管理手册
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" >
            
                <span>
            
                    
                    Mysql
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1.1" >
            
                <span>
            
                    
                    [设计规范]
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1.1.1" data-path="../mysql/设计规范/150_表设计模版.html">
            
                <a href="../mysql/设计规范/150_表设计模版.html">
            
                    
                    表设计模版
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.1.2" >
            
                <span>
            
                    
                    [常用函数]
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.1.3" >
            
                <span>
            
                    
                    [主从复制]
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.1.4" >
            
                <span>
            
                    
                    [实用技巧]
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1.4.1" data-path="../mysql/实用技巧/710_数据行列转换.html">
            
                <a href="../mysql/实用技巧/710_数据行列转换.html">
            
                    
                    数据行列转换
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.1.5" >
            
                <span>
            
                    
                    MySQL运维记录
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1.5.1" data-path="../mysql/MySQL运维记录/850_千万级大表转化为按月分区表.html">
            
                <a href="../mysql/MySQL运维记录/850_千万级大表转化为按月分区表.html">
            
                    
                    千万级大表分区表转化
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.1.6" data-path="../mysql/980_MySQL问题记录.html">
            
                <a href="../mysql/980_MySQL问题记录.html">
            
                    
                    MySQL问题记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.2" >
            
                <span>
            
                    
                    Oracle
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3" >
            
                <span>
            
                    
                    DB2
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4" >
            
                <span>
            
                    
                    Redis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.4.1" data-path="110_Redis简介.html">
            
                <a href="110_Redis简介.html">
            
                    
                    Redis简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.2" data-path="120_Redis单机部署.html">
            
                <a href="120_Redis单机部署.html">
            
                    
                    Redis单机部署
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.1.4.3" data-path="130_Redis配置文件.html">
            
                <a href="130_Redis配置文件.html">
            
                    
                    Redis配置文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.4" data-path="131_我的常用配置文件.html">
            
                <a href="131_我的常用配置文件.html">
            
                    
                    我的常用配置文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.5" data-path="140_Redis常用命令.html">
            
                <a href="140_Redis常用命令.html">
            
                    
                    Redis常用命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.6" data-path="150_Redis数据类型.html">
            
                <a href="150_Redis数据类型.html">
            
                    
                    Redis数据类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.7" data-path="160_Redis管理.html">
            
                <a href="160_Redis管理.html">
            
                    
                    Redis管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.8" data-path="170_Redis持久化.html">
            
                <a href="170_Redis持久化.html">
            
                    
                    Redis持久化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.9" data-path="175_Redis备份与恢复.html">
            
                <a href="175_Redis备份与恢复.html">
            
                    
                    Redis持久化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.10" data-path="180_Redis主从复制.html">
            
                <a href="180_Redis主从复制.html">
            
                    
                    Redis主从复制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.11" data-path="190_Redis集群高可用.html">
            
                <a href="190_Redis集群高可用.html">
            
                    
                    Redis集群高可用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.12" data-path="200_缓存应用场景.html">
            
                <a href="200_缓存应用场景.html">
            
                    
                    缓存应用场景
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.5" >
            
                <span>
            
                    
                    MongoDB
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.5.1" data-path="../mongodb/MongoDB记录.html">
            
                <a href="../mongodb/MongoDB记录.html">
            
                    
                    MongoDB记录
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.6" >
            
                <span>
            
                    
                    知识收藏
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.6.1" data-path="../knowledge/110_经典词句.html">
            
                <a href="../knowledge/110_经典词句.html">
            
                    
                    经典词句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.2" data-path="../knowledge/120_励志思想.html">
            
                <a href="../knowledge/120_励志思想.html">
            
                    
                    励志思想
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Redis配置文件</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><b> </b>Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E2D;&#x6587;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><b>1. </b>&#x4E2D;&#x6587;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#&#x539F;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><b>2. </b>&#x539F;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</a></li></ul></ul></div><a href="#redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a name="redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a> Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h1>
<p>&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x4EBA;&#x5458;&#xFF0C;&#x6DF1;&#x77E5;&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x7406;&#x89E3;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5E38;&#x7528;&#x9009;&#x9879;&#x624D;&#x80FD;&#x6E38;&#x5203;&#x6709;&#x4F59;&#x3002;</p>
<p>Redis &#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8FD8;&#x662F;&#x633A;&#x957F;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x5FC5;&#x8981;&#x6574;&#x7406;&#x4E00;&#x4EFD;&#x5E38;&#x7528;&#x7684;&#x4E2D;&#x6587;&#x914D;&#x7F6E;&#xFF0C;&#x4F7F;&#x7528;&#x8D77;&#x6765;&#x66F4;&#x5F97;&#x5FC3;&#x5E94;&#x624B;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#xFF1A;</p>
<p><a href="https://www.cnblogs.com/pqchao/p/6558688.html" target="_blank">Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;</a></p>
<p><a href="https://www.cnblogs.com/sjfgod/p/7624437.html" target="_blank">Redis&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;redis.conf&#x5168;&#x9762;&#x89E3;&#x6790;</a></p>
<p><a href="https://blog.csdn.net/qq_37674858/article/details/80844533" target="_blank">Redis 4.0.6 &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7FFB;&#x8BD1;</a></p>
<p>&#x4E0B;&#x9762;&#x57FA;&#x4E8E;&#x76EE;&#x524D;&#x6700;&#x65B0;&#x7684; redis-4.0.11 &#x7248;&#x672C;&#xFF0C;&#x68B3;&#x7406;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p>
<h2 id="&#x4E2D;&#x6587;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a name="&#x4E2D;&#x6587;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#&#x4E2D;&#x6587;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x4E2D;&#x6587;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h2>
<pre class="language-"><code class="lang-sh"><span class="hljs-comment">## &#x7531; install_server.sh &#x811A;&#x672C;&#x81EA;&#x52A8;&#x751F;&#x6210; ##</span>
<span class="hljs-comment"># Redis &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x793A;&#x4F8B;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;&#xFF0C;&#x4E3A;&#x4E86;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;Redis &#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#xFF1A;</span>
<span class="hljs-comment"># ./redis-server /path/to/redis.conf</span>

<span class="hljs-comment"># &#x5F53;&#x4F60;&#x9700;&#x8981;&#x4E3A;&#x67D0;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x5E26;&#x4E0A;&#x5355;&#x4F4D;&#xFF0C;</span>
<span class="hljs-comment"># &#x901A;&#x5E38;&#x7684;&#x683C;&#x5F0F;&#x5C31;&#x662F; 1k 5GB 4M &#x7B49;&#x7B49;:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1k =&gt; 1000 bytes</span>
<span class="hljs-comment"># 1kb =&gt; 1024 bytes</span>
<span class="hljs-comment"># 1m =&gt; 1000000 bytes</span>
<span class="hljs-comment"># 1mb =&gt; 1024*1024 bytes</span>
<span class="hljs-comment"># 1g =&gt; 1000000000 bytes</span>
<span class="hljs-comment"># 1gb =&gt; 1024*1024*1024 bytes</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5355;&#x4F4D;&#x662F;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x7684;&#xFF0C;&#x56E0;&#x6B64; 1GB 1Gb 1gB &#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;</span>

<span class="hljs-comment">################################## INCLUDES ###################################</span>

<span class="hljs-comment"># &#x5047;&#x5982;&#x8BF4;&#x4F60;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x7684; redis server &#x7684;&#x6807;&#x51C6;&#x914D;&#x7F6E;&#x6A21;&#x677F;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F46;&#x9488;&#x5BF9;&#x67D0;&#x4E9B; server &#x53C8;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x4E2A;&#x6027;&#x5316;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; include &#x6765;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x5BF9;&#x4F60;&#x6765;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;&#xFF1A;include &#x662F;&#x4E0D;&#x80FD;&#x88AB; config rewrite &#x547D;&#x4EE4;&#x6539;&#x5199;&#x7684;</span>
<span class="hljs-comment"># &#x7531;&#x4E8E; redis &#x603B;&#x662F;&#x4EE5;&#x6700;&#x540E;&#x7684;&#x914D;&#x7F6E;&#x884C;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6307;&#x4EE4;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x6700;&#x597D;&#x662F;&#x628A; include &#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x6700;&#x524D;&#x9762;&#xFF0C;</span>
<span class="hljs-comment"># &#x4EE5;&#x907F;&#x514D;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8986;&#x76D6;&#x914D;&#x7F6E;&#x7684;&#x6539;&#x53D8;&#xFF1B;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x7528; include &#x6765;&#x8986;&#x76D6;&#x914D;&#x7F6E;&#xFF0C;&#x5219;&#x5E94;&#x8BE5;&#x5C06; include &#x4F5C;&#x4E3A;&#x6700;&#x540E;&#x4E00;&#x884C;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># include /path/to/local.conf</span>
<span class="hljs-comment"># include /path/to/other.conf</span>

<span class="hljs-comment">################################## &#x6A21;&#x5757; #####################################</span>

<span class="hljs-comment"># &#x542F;&#x52A8;&#x65F6;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x3002;&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x65E0;&#x6CD5;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x5B83;&#x4F1A;&#x4E2D;&#x6B62;&#x3002;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x591A;&#x4E2A;loadmodule&#x6307;&#x4EE4;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># loadmodule /path/to/my_module.so</span>
<span class="hljs-comment"># loadmodule /path/to/other_module.so</span>

<span class="hljs-comment">################################## &#x7F51;&#x7EDC; #####################################</span>

<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x6307;&#x5B9A; &quot;bind&quot; &#x914D;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x5219; Redis&#x5C06;&#x4FA6;&#x542C;</span>
<span class="hljs-comment"># &#x6765;&#x81EA;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6240;&#x6709;&#x53EF;&#x7528;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x7684;&#x8FDE;&#x63A5;&#x3002;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x53EA;&#x4FA6;&#x542C;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x9009;&#x5B9A;&#x7684;&#x63A5;&#x53E3;</span>
<span class="hljs-comment"># &quot;bind&quot; &#x914D;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x540E;&#x8DDF;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; IP &#x5730;&#x5740;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># bind 192.168.1.100 10.0.0.1</span>
<span class="hljs-comment"># bind 127.0.0.1 ::1</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># ~~~ &#x8B66;&#x544A; ~~~ </span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x8FD0;&#x884C; Redis&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x76F4;&#x63A5;&#x66B4;&#x9732;&#x5728; internet&#xFF0C;&#x7ED1;&#x5B9A;&#x5230;&#x6240;&#x6709;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x662F;&#x5371;&#x9669;&#x7684;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F1A;&#x5BF9;&#x4E92;&#x8054;&#x7F51;&#x4E0A;&#x5BF9;&#x6BCF;&#x4E2A;&#x4EBA;&#x66B4;&#x9732; Redis &#x5B9E;&#x4F8B;</span>
<span class="hljs-comment"># &#x6240;&#x4EE5;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x6211;&#x4EEC;&#x5F3A;&#x5236; Redis &#x53EA;&#x76D1;&#x542C; IPv4 lookback interface &#x5730;&#x5740; (&#x8FD9;&#x610F;&#x5473;&#x7740; Redis &#x4EC5;&#x80FD;&#x591F;</span>
<span class="hljs-comment"># &#x63A5;&#x53D7;&#x6765;&#x81EA;&#x672C;&#x673A;&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x4F60;&#x786E;&#x5B9A;&#x4F60;&#x5E0C;&#x671B;&#x6240;&#x6709;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x90FD;&#x8981;&#x76D1;&#x542C;</span>
<span class="hljs-comment"># &#x53EA;&#x9700;&#x8981;&#x6CE8;&#x91CA;&#x4E0B;&#x9762;&#x7684;&#x884C;</span>
<span class="hljs-comment"># ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="hljs-built_in">bind</span> 127.0.0.1 172.20.32.125

<span class="hljs-comment"># &#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x662F;&#x4E00;&#x5C42;&#x5B89;&#x5168;&#x9632;&#x62A4;&#xFF0C;&#x4EE5;&#x514D;&#x5C06; Redis &#x5B9E;&#x4F8B;&#x66B4;&#x9732;&#x5728;&#x4E92;&#x8054;&#x7F51;&#x4E0A;&#x65F6;&#xFF0C;&#x88AB;&#x975E;&#x6CD5;&#x8BBF;&#x95EE;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5F53;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x6253;&#x5F00;&#x5E76;&#x4E14;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) &#x670D;&#x52A1;&#x5668;&#x6CA1;&#x6709;&#x4F7F;&#x7528; &quot;bind&quot; &#x6307;&#x4EE4;&#x663E;&#x793A;&#x7ED1;&#x5B9A;&#x5230;&#x4E00;&#x7EC4;&#x5730;&#x5740;&#x3002;</span>
<span class="hljs-comment"># 2) &#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x5BC6;&#x7801;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x670D;&#x52A1;&#x5668;&#x53EA;&#x63A5;&#x53D7;&#x6765;&#x81EA;&#x4EE5;&#x4E0B;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#xFF1A;</span>
<span class="hljs-comment"># IPv4 and IPv6 loopback &#x5730;&#x5740; 127.0.0.1 and ::1, and from Unix domain sockets.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x542F;&#x7528;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x5230; Redis&#xFF0C;</span>
<span class="hljs-comment"># &#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x7ED1;&#x5B9A;&#x7279;&#x5B9A;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#xFF0C;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x8FDB;&#x884C;&#x7981;&#x7528;&#x3002;</span>
protected-mode no

<span class="hljs-comment"># &#x63A5;&#x53D7;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x4E0A;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 6379</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86;&#x7AEF;&#x53E3; 0&#xFF0C;Redis&#x5C06;&#x4E0D;&#x4F1A;&#x4FA6;&#x542C; TCP socket.</span>
port 6379

<span class="hljs-comment"># TCP listen() backlog.</span>
<span class="hljs-comment"># [TCP/IP&#x534F;&#x8BAE;&#x4E2D;backlog&#x53C2;&#x6570;](https://www.cnblogs.com/Orgliny/p/5780796.html)</span>
<span class="hljs-comment"># [TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;-backlog&#x961F;&#x5217;&#x95EE;&#x9898;](https://blog.csdn.net/varyall/article/details/79681562)</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># &#x6B64;&#x53C2;&#x6570;&#x786E;&#x5B9A;&#x4E86; TCP &#x8FDE;&#x63A5;&#x4E2D;&#x5DF2;&#x5B8C;&#x6210;&#x961F;&#x5217;(&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x4E4B;&#x540E;)&#x7684;&#x957F;&#x5EA6;&#xFF0C; </span>
<span class="hljs-comment"># &#x5F53;&#x7136;&#x6B64;&#x503C;&#x5FC5;&#x987B;&#x4E0D;&#x5927;&#x4E8E;Linux&#x7CFB;&#x7EDF;&#x5B9A;&#x4E49;&#x7684; /proc/sys/net/core/somaxconn &#x503C;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; 511&#xFF0C;&#x800C; Linux &#x7684;&#x9ED8;&#x8BA4;&#x53C2;&#x6570;&#x503C;&#x662F; 128&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x7CFB;&#x7EDF;&#x5E76;&#x53D1;&#x91CF;&#x5927;&#x5E76;&#x4E14;&#x5BA2;&#x6237;&#x7AEF;&#x901F;&#x5EA6;&#x7F13;&#x6162;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4E00;&#x8D77;&#x53C2;&#x8003;&#x8BBE;&#x5B9A;&#x3002;</span>
<span class="hljs-comment"># &#x8BE5;&#x5185;&#x6838;&#x53C2;&#x6570;&#x9ED8;&#x8BA4;&#x503C;&#x4E00;&#x822C;&#x662F; 128&#xFF0C;&#x5BF9;&#x4E8E;&#x8D1F;&#x8F7D;&#x5F88;&#x5927;&#x7684;&#x670D;&#x52A1;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#x5927;&#x5927;&#x7684;&#x4E0D;&#x591F;&#x3002;&#x4E00;&#x822C;&#x4F1A;&#x5C06;&#x5B83;&#x4FEE;&#x6539;&#x4E3A;2048&#x6216;&#x8005;&#x66F4;&#x5927;&#x3002;</span>
<span class="hljs-comment"># &#x786E;&#x4FDD;&#x540C;&#x65F6;&#x63D0;&#x9AD8; somaxconn &#x548C; tcp_max_syn_backlog &#x7684;&#x503C;&#x83B7;&#x5F97;&#x7406;&#x60F3;&#x7684;&#x6548;&#x679C;&#x3002;</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#xFF1A;&#x5728; /etc/sysctl.conf&#x4E2D;&#x6DFB;&#x52A0;: net.core.somaxconn = 2048&#xFF0C;&#x7136;&#x540E;&#x5728;&#x7EC8;&#x7AEF;&#x4E2D;&#x6267;&#x884C; sysctl -p&#x3002;</span>
tcp-backlog 511

<span class="hljs-comment"># &#x6307;&#x5B9A; redis &#x76D1;&#x542C;&#x7684; unix socket &#x8DEF;&#x5F84;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x542F;&#x7528;&#xFF0C;unixsocketper &#x6307;&#x5B9A;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;</span>
<span class="hljs-comment"># Unix socket.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Specify the path for the Unix socket that will be used to listen for</span>
<span class="hljs-comment"># incoming connections. There is no default, so Redis will not listen</span>
<span class="hljs-comment"># on a unix socket when not specified.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># unixsocket /tmp/redis.sock</span>
<span class="hljs-comment"># unixsocketperm 700</span>

<span class="hljs-comment"># &#x5BA2;&#x6237;&#x7AEF;&#x7A7A;&#x95F2; N &#x79D2;&#x540E;&#x5173;&#x95ED;&#x8FDE;&#x63A5;(0&#x8868;&#x793A;&#x7981;&#x7528;)</span>
timeout 0

<span class="hljs-comment"># TCP keepalive &#x53C2;&#x6570;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E0D;&#x4E3A; 0&#xFF0C;&#x5C31;&#x4F7F;&#x7528;&#x914D;&#x7F6E; TCP &#x7684; SO_KEEPALIVE &#x503C;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F7F;&#x7528;k eepalive&#x6709;&#x4E24;&#x4E2A;&#x597D;&#x5904;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) &#x68C0;&#x6D4B;&#x6302;&#x6389;&#x7684;&#x5BF9;&#x7AEF;&#x3002;</span>
<span class="hljs-comment"># 2) &#x964D;&#x4F4E;&#x4E2D;&#x95F4;&#x8BBE;&#x5907;&#x51FA;&#x95EE;&#x9898;&#x800C;&#x5BFC;&#x81F4;&#x7F51;&#x7EDC;&#x770B;&#x4F3C;&#x8FDE;&#x63A5;&#x5374;&#x5DF2;&#x7ECF;&#x4E0E;&#x5BF9;&#x7AEF;&#x7AEF;&#x53E3;&#x7684;&#x95EE;&#x9898;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5728; Linux &#x5185;&#x6838;&#x4E2D;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E86; keepalive&#xFF0C;redis &#x4F1A;&#x5B9A;&#x65F6;&#x7ED9;&#x5BF9;&#x7AEF;&#x53D1;&#x9001; ACKs&#x3002;</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;&#xFF0C;&#x8981;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x9700;&#x8981;&#x53CC;&#x500D;&#x7684;&#x65F6;&#x95F4;&#x3002;</span>
<span class="hljs-comment"># &#x5728;&#x5176;&#x4ED6;&#x5185;&#x6838;&#x4E0A;&#xFF0C;&#x5468;&#x671F;&#x53D6;&#x51B3;&#x4E8E;&#x5185;&#x6838;&#x914D;&#x7F6E;&#x3002;</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x4ECE; Redis 3.2.1 &#x5F00;&#x59CB;&#x52A0;&#x5165;&#xFF0C;&#x5408;&#x7406;&#x503C;&#x662F; 300 &#x79D2;&#x3002;</span>
tcp-keepalive 300

<span class="hljs-comment">################################# &#x5E38;&#x7528; #####################################</span>

<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; redis &#x4E0D;&#x662F;&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes&#x3002;</span>
<span class="hljs-comment"># &#x5F53;redis&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x5199;&#x4E00;&#x4E2A; pid &#x5230; /var/run/redis.pid &#x6587;&#x4EF6;&#x91CC;&#x9762;&#x3002;</span>
daemonize yes

<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x901A;&#x8FC7; upstart &#x6216;&#x8005; systemd &#x6765;&#x8FD0;&#x884C;&#x548C;&#x7BA1;&#x7406; Redis &#x5B88;&#x62A4;&#x8FDB;&#x7A0B;</span>
<span class="hljs-comment"># &#x9009;&#x9879;&#xFF1A;</span>
<span class="hljs-comment">#   supervised no      - no supervision interaction</span>
<span class="hljs-comment">#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode</span>
<span class="hljs-comment">#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET</span>
<span class="hljs-comment">#   supervised auto    - detect upstart or systemd method based on</span>
<span class="hljs-comment">#                        UPSTART_JOB or NOTIFY_SOCKET environment variables</span>
<span class="hljs-comment"># Note: these supervision methods only signal &quot;process is ready.&quot;</span>
<span class="hljs-comment">#       They do not enable continuous liveness pings back to your supervisor.</span>
supervised no

<span class="hljs-comment"># &#x5F53;redis&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x628A; pid &#x9ED8;&#x8BA4;&#x5199;&#x5230; /var/run/redis.pid &#x6587;&#x4EF6;&#x91CC;&#x9762;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x81EA;&#x5DF1;&#x5236;&#x5B9A;&#x5B83;&#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#x3002;</span>
pidfile /var/run/redis_6379.pid

&#x6E05;&#x56ED;
&#x6C89;&#x6CA1;&#x7684;Atlantis

redis.conf&#x914D;&#x7F6E;&#x8BE6;&#x7EC6;&#x89E3;&#x6790;
-

&#x590D;&#x5236;&#x4EE3;&#x7801;
<span class="hljs-comment"># redis &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x793A;&#x4F8B;</span>

<span class="hljs-comment"># &#x5F53;&#x4F60;&#x9700;&#x8981;&#x4E3A;&#x67D0;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x5E26;&#x4E0A;&#x5355;&#x4F4D;&#xFF0C;</span>
<span class="hljs-comment"># &#x901A;&#x5E38;&#x7684;&#x683C;&#x5F0F;&#x5C31;&#x662F; 1k 5gb 4m &#x7B49;&#x9171;&#x7D2B;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1k  =&gt; 1000 bytes</span>
<span class="hljs-comment"># 1kb =&gt; 1024 bytes</span>
<span class="hljs-comment"># 1m  =&gt; 1000000 bytes</span>
<span class="hljs-comment"># 1mb =&gt; 1024*1024 bytes</span>
<span class="hljs-comment"># 1g  =&gt; 1000000000 bytes</span>
<span class="hljs-comment"># 1gb =&gt; 1024*1024*1024 bytes</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5355;&#x4F4D;&#x662F;&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#x7684;&#xFF0C;&#x4F60;&#x5199; 1K 5GB 4M &#x4E5F;&#x884C;</span>

<span class="hljs-comment">################################## INCLUDES ###################################</span>

<span class="hljs-comment"># &#x5047;&#x5982;&#x8BF4;&#x4F60;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x7684; redis server &#x7684;&#x6807;&#x51C6;&#x914D;&#x7F6E;&#x6A21;&#x677F;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F46;&#x9488;&#x5BF9;&#x67D0;&#x4E9B; server &#x53C8;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x4E2A;&#x6027;&#x5316;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; include &#x6765;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x5BF9;&#x4F60;&#x6765;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#x8981;&#x6CE8;&#x610F;&#x54E6;&#xFF0C;include &#x662F;&#x4E0D;&#x80FD;&#x88AB; config rewrite &#x547D;&#x4EE4;&#x6539;&#x5199;&#x7684;</span>
<span class="hljs-comment"># &#x7531;&#x4E8E; redis &#x603B;&#x662F;&#x4EE5;&#x6700;&#x540E;&#x7684;&#x52A0;&#x5DE5;&#x7EBF;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6307;&#x4EE4;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x6700;&#x597D;&#x662F;&#x628A; include &#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x6700;&#x524D;&#x9762;&#xFF0C;</span>
<span class="hljs-comment"># &#x4EE5;&#x907F;&#x514D;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8986;&#x76D6;&#x914D;&#x7F6E;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x76F8;&#x53CD;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x653E;&#x5728;&#x540E;&#x9762;&#xFF08;&#x5916;&#x56FD;&#x4EBA;&#x771F;&#x5570;&#x55E6;&#xFF09;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># include /path/to/local.conf</span>
<span class="hljs-comment"># include /path/to/other.conf</span>

<span class="hljs-comment">################################ &#x5E38;&#x7528; #####################################</span>

<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; redis &#x4E0D;&#x662F;&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes&#x3002;</span>
<span class="hljs-comment"># &#x5F53;redis&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x5199;&#x4E00;&#x4E2A; pid &#x5230; /var/run/redis.pid &#x6587;&#x4EF6;&#x91CC;&#x9762;&#x3002;</span>
daemonize no

<span class="hljs-comment"># &#x5F53;redis&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x628A; pid &#x9ED8;&#x8BA4;&#x5199;&#x5230; /var/run/redis.pid &#x6587;&#x4EF6;&#x91CC;&#x9762;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x81EA;&#x5DF1;&#x5236;&#x5B9A;&#x5B83;&#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#x3002;</span>
pidfile /var/run/redis.pid

<span class="hljs-comment"># &#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 6379&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8BBE;&#x4E3A; 0 &#xFF0C;redis &#x5C06;&#x4E0D;&#x5728; socket &#x4E0A;&#x76D1;&#x542C;&#x4EFB;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span>
port 6379

<span class="hljs-comment"># TCP &#x76D1;&#x542C;&#x7684;&#x6700;&#x5927;&#x5BB9;&#x7EB3;&#x6570;&#x91CF;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x8C03;&#x9AD8;&#x4EE5;&#x907F;&#x514D;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7F13;&#x6162;&#x7684;&#x95EE;&#x9898;&#x3002;</span>
<span class="hljs-comment"># Linux &#x5185;&#x6838;&#x4F1A;&#x4E00;&#x58F0;&#x4E0D;&#x54CD;&#x7684;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x7F29;&#x5C0F;&#x6210; /proc/sys/net/core/somaxconn &#x5BF9;&#x5E94;&#x7684;&#x503C;&#xFF0C;</span>
<span class="hljs-comment"># &#x6240;&#x4EE5;&#x4F60;&#x8981;&#x4FEE;&#x6539;&#x8FD9;&#x4E24;&#x4E2A;&#x503C;&#x624D;&#x80FD;&#x8FBE;&#x5230;&#x4F60;&#x7684;&#x9884;&#x671F;&#x3002;</span>
tcp-backlog 511

<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis &#x5728; server &#x4E0A;&#x6240;&#x6709;&#x6709;&#x6548;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x4E0A;&#x76D1;&#x542C;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span>
<span class="hljs-comment"># &#x4F60;&#x5982;&#x679C;&#x53EA;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x4E0A;&#x76D1;&#x542C;&#xFF0C;&#x90A3;&#x4F60;&#x5C31;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;IP&#x6216;&#x8005;&#x591A;&#x4E2A;IP&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x793A;&#x4F8B;&#xFF0C;&#x591A;&#x4E2A;IP&#x7528;&#x7A7A;&#x683C;&#x9694;&#x5F00;:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># bind 192.168.1.100 10.0.0.1</span>
<span class="hljs-comment"># bind 127.0.0.1</span>

<span class="hljs-comment"># &#x6307;&#x5B9A; unix socket &#x7684;&#x8DEF;&#x5F84;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># unixsocket /tmp/redis.sock</span>
<span class="hljs-comment"># unixsocketperm 755</span>

<span class="hljs-comment"># &#x6307;&#x5B9A;&#x5728;&#x4E00;&#x4E2A; client &#x7A7A;&#x95F2;&#x591A;&#x5C11;&#x79D2;&#x4E4B;&#x540E;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#xFF08;0 &#x5C31;&#x662F;&#x4E0D;&#x7BA1;&#x5B83;&#xFF09;</span>
timeout 0

<span class="hljs-comment"># tcp &#x5FC3;&#x8DF3;&#x5305;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;&#x975E;&#x96F6;&#xFF0C;&#x5219;&#x5728;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x7F3A;&#x4E4F;&#x901A;&#x8BAF;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528; SO_KEEPALIVE &#x53D1;&#x9001; tcp acks &#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x4E4B;&#x6240;&#x6709;&#x6709;&#x7528;&#xFF0C;&#x4E3B;&#x8981;&#x7531;&#x4E24;&#x4E2A;&#x539F;&#x56E0;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) &#x9632;&#x6B62;&#x6B7B;&#x7684; peers</span>
<span class="hljs-comment"># 2) Take the connection alive from the point of view of network</span>
<span class="hljs-comment">#    equipment in the middle.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># On Linux, the specified value (in seconds) is the period used to send ACKs.</span>
<span class="hljs-comment"># Note that to close the connection the double of the time is needed.</span>
<span class="hljs-comment"># On other kernels the period depends on the kernel configuration.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># A reasonable value for this option is 60 seconds.</span>
<span class="hljs-comment"># &#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x5408;&#x7406;&#x7684;&#x503C;&#x5C31;&#x662F;60&#x79D2;</span>
tcp-keepalive 0

<span class="hljs-comment"># &#x6307;&#x5B9A;&#x670D;&#x52A1;&#x5668;&#x7684;&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#x3002;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x8FD9;&#x4E9B;&#x503C;&#xFF1A;</span>
<span class="hljs-comment"># debug (&#x8BB0;&#x5F55;&#x5927;&#x91CF;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x3001;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;)</span>
<span class="hljs-comment"># verbose (&#x8F83;&#x591A;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;)</span>
<span class="hljs-comment"># notice (&#x9002;&#x91CF;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x73AF;&#x5883;)</span>
<span class="hljs-comment"># warning (&#x4EC5;&#x6709;&#x90E8;&#x5206;&#x91CD;&#x8981;&#x3001;&#x5173;&#x952E;&#x4FE1;&#x606F;&#x624D;&#x4F1A;&#x88AB;&#x8BB0;&#x5F55;)</span>
loglevel notice

<span class="hljs-comment"># &#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;</span>
<span class="hljs-comment"># &#x5F53;&#x6307;&#x5B9A;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x4E3A;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF0C;&#x5982;&#x679C; redis &#x4EE5;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6A21;&#x5F0F;&#x8FD0;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x65E5;&#x5FD7;&#x5C06;&#x4F1A;&#x8F93;&#x51FA;&#x5230; /dev/null</span>
logfile /var/<span class="hljs-built_in">log</span>/redis_6379.log

<span class="hljs-comment"># &#x60F3;&#x628A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5230;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#xFF0C;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes</span>
<span class="hljs-comment"># syslog-enabled no</span>

<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x7684;&#x6807;&#x8BC6;</span>
<span class="hljs-comment"># syslog-ident redis</span>

<span class="hljs-comment"># &#x6307;&#x5B9A;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x8BBE;&#x7F6E;&#xFF0C;&#x5FC5;&#x987B;&#x662F; USER &#x6216;&#x8005;&#x662F; LOCAL0-LOCAL7 &#x4E4B;&#x95F4;&#x7684;&#x503C;&#x3002;</span>
<span class="hljs-comment"># syslog-facility local0</span>

<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x76EE;&#x3002;&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x636E;&#x5E93;&#x662F; DB 0&#xFF0C;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x4E0A;&#x4F7F;&#x7528; select &lt;dbid&gt; &#x547D;&#x4EE4;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;</span>
<span class="hljs-comment"># dbid &#x662F;&#x4E00;&#x4E2A;&#x4ECB;&#x4E8E; 0 &#x5230; databases - 1 &#x4E4B;&#x95F4;&#x7684;&#x6570;&#x503C;&#x3002;</span>
databases 16

<span class="hljs-comment"># redis &#x542F;&#x52A8;&#x65F6;&#x662F;&#x5426;&#x663E;&#x793A; Logo</span>
always-show-logo yes

<span class="hljs-comment">################################ &#x5FEB;&#x7167;  ################################</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5B58; DB &#x5230;&#x78C1;&#x76D8;&#xFF1A;</span>
<span class="hljs-comment">#     &#x683C;&#x5F0F;&#xFF1A;save &lt;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#xFF08;&#x79D2;&#xFF09;&gt; &lt;&#x5199;&#x5165;&#x6B21;&#x6570;&gt;</span>
<span class="hljs-comment">#     &#x6839;&#x636E;&#x7ED9;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x548C;&#x5199;&#x5165;&#x6B21;&#x6570;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x78C1;&#x76D8;</span>
<span class="hljs-comment">#     &#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF1A;</span>
<span class="hljs-comment">#     900 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 1 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span>
<span class="hljs-comment">#     300 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 10 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span>
<span class="hljs-comment">#     60 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 10000 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span>
<span class="hljs-comment">#  &#x3000;&#x3000;</span>
<span class="hljs-comment">#     &#x6CE8;&#x610F;&#xFF1A;&#x4F60;&#x53EF;&#x4EE5;&#x6CE8;&#x91CA;&#x6389;&#x6240;&#x6709;&#x7684; save &#x884C;&#x6765;&#x505C;&#x7528;&#x4FDD;&#x5B58;&#x529F;&#x80FD;&#x3002;</span>
<span class="hljs-comment">#     &#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x5B9E;&#x73B0;&#x505C;&#x7528;&#xFF1A;</span>
<span class="hljs-comment">#     save &quot;&quot;</span>
save 900 1
save 300 10
save 60 10000

<span class="hljs-comment"># &#x5982;&#x679C;&#x7528;&#x6237;&#x5F00;&#x542F;&#x4E86;RDB&#x5FEB;&#x7167;&#x529F;&#x80FD;&#xFF0C;&#x90A3;&#x4E48;&#x5728;redis&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#x5230;&#x78C1;&#x76D8;&#x65F6;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x5931;&#x8D25;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x4F1A;&#x505C;&#x6B62;&#x63A5;&#x53D7;&#x6240;&#x6709;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#x53EF;&#x4EE5;&#x8BA9;&#x7528;&#x6237;&#x5F88;&#x660E;&#x786E;&#x7684;&#x77E5;&#x9053;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x548C;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E0D;&#x4E00;&#x81F4;&#x4E86;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;redis&#x4E0D;&#x987E;&#x8FD9;&#x79CD;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x4E00;&#x610F;&#x5B64;&#x884C;&#x7684;&#x7EE7;&#x7EED;&#x63A5;&#x6536;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x8D77;&#x4E00;&#x4E9B;&#x707E;&#x96BE;&#x6027;&#x7684;&#x540E;&#x679C;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x4E0B;&#x4E00;&#x6B21;RDB&#x6301;&#x4E45;&#x5316;&#x6210;&#x529F;&#xFF0C;redis&#x4F1A;&#x81EA;&#x52A8;&#x6062;&#x590D;&#x63A5;&#x53D7;&#x5199;&#x8BF7;&#x6C42;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x4E0D;&#x5728;&#x4E4E;&#x8FD9;&#x79CD;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x6216;&#x8005;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x624B;&#x6BB5;&#x53D1;&#x73B0;&#x548C;&#x63A7;&#x5236;&#x8FD9;&#x79CD;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;</span>
<span class="hljs-comment"># &#x4EE5;&#x4FBF;&#x5728;&#x5FEB;&#x7167;&#x5199;&#x5165;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x4E5F;&#x80FD;&#x786E;&#x4FDD;redis&#x7EE7;&#x7EED;&#x63A5;&#x53D7;&#x65B0;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x3002;</span>
stop-writes-on-bgsave-error yes

<span class="hljs-comment"># &#x5BF9;&#x4E8E;&#x5B58;&#x50A8;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x662F;&#x7684;&#x8BDD;&#xFF0C;redis &#x4F1A;&#x91C7;&#x7528; LZF &#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x3002;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x60F3;&#x6D88;&#x8017; CPU &#x6765;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x7684;&#x8BDD;&#xFF0C;</span>
<span class="hljs-comment"># &#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&#x5173;&#x95ED;&#x6B64;&#x529F;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x5FEB;&#x7167;&#x4F1A;&#x6BD4;&#x8F83;&#x5927;&#x3002;</span>
rdbcompression yes

<span class="hljs-comment"># &#x5728;&#x5B58;&#x50A8;&#x5FEB;&#x7167;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BA9;redis&#x4F7F;&#x7528;CRC64&#x7B97;&#x6CD5;&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6821;&#x9A8C;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x4F1A;&#x589E;&#x52A0;&#x5927;&#x7EA6;10%&#x7684;&#x6027;&#x80FD;&#x6D88;&#x8017;&#xFF0C;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x5E0C;&#x671B;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x5927;&#x7684;&#x6027;&#x80FD;&#x63D0;&#x5347;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x6B64;&#x529F;&#x80FD;&#x3002;</span>
rdbchecksum yes

<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x5FEB;&#x7167;&#x7684;&#x6587;&#x4EF6;&#x540D;</span>
dbfilename dump.rdb

<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x5FEB;&#x7167;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x653E;&#x8DEF;&#x5F84;&#xFF0C;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x4E00;&#x5B9A;&#x662F;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x662F;&#x6587;&#x4EF6;&#x540D;&#x3002;</span>
dir /var/lib/redis/6379

<span class="hljs-comment">################################# &#x4E3B;&#x4ECE;&#x590D;&#x5236; #################################</span>

<span class="hljs-comment"># &#x4E3B;&#x4ECE;&#x590D;&#x5236;&#xFF0C;&#x4F7F;&#x7528; slaveof &#x6765;&#x8BA9;&#x4E00;&#x4E2A; redis &#x5B9E;&#x4F8B;&#x6210;&#x4E3A;&#x53E6;&#x4E00;&#x4E2A; reids &#x5B9E;&#x4F8B;&#x7684;&#x526F;&#x672C;&#xFF0C;&#x9ED8;&#x8BA4;&#x5173;&#x95ED;</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x53EA;&#x9700;&#x8981;&#x5728; slave &#x4E0A;&#x914D;&#x7F6E;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x5173;&#x4E8E; Redis &#x590D;&#x5236;&#xFF0C;&#x6709;&#x51E0;&#x70B9;&#x9700;&#x8981;&#x5C3D;&#x5FEB;&#x7406;&#x89E3;&#xFF1A;</span>
<span class="hljs-comment"># 1) Redis &#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x662F;&#x5F02;&#x6B65;&#x7684;</span>
<span class="hljs-comment"># 2) Redis &#x7684;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x80FD;&#x591F;&#x6267;&#x884C;&#x90E8;&#x5206;&#x91CD;&#x540C;&#x6B65;</span>
<span class="hljs-comment"># 3) &#x590D;&#x5236;&#x662F;&#x81EA;&#x52A8;&#x7684;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7528;&#x6237;&#x5E72;&#x9884;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># slaveof &lt;masterip&gt; &lt;masterport&gt;</span>

<span class="hljs-comment"># &#x5982;&#x679C; master &#x9700;&#x8981;&#x5BC6;&#x7801;&#x8BA4;&#x8BC1;&#xFF0C;&#x5C31;&#x5728;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E0D;&#x8BBE;&#x7F6E;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># masterauth &lt;master-password&gt;</span>

<span class="hljs-comment"># &#x5F53;&#x4E00;&#x4E2A; slave &#x4E0E; master &#x5931;&#x53BB;&#x8054;&#x7CFB;&#xFF0C;&#x6216;&#x8005;&#x590D;&#x5236;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;</span>
<span class="hljs-comment"># slave &#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E24;&#x79CD;&#x8868;&#x73B0;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) &#x5982;&#x679C;&#x4E3A; yes &#xFF0C;slave &#x4ECD;&#x7136;&#x4F1A;&#x5E94;&#x7B54;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x662F;&#x8FC7;&#x65F6;&#xFF0C;</span>
<span class="hljs-comment">#    &#x6216;&#x8005;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x662F;&#x7A7A;&#x7684;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x540C;&#x6B65;&#x7684;&#x65F6;&#x5019;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 2) &#x5982;&#x679C;&#x4E3A; no &#xFF0C;&#x5728;&#x4F60;&#x6267;&#x884C;&#x9664;&#x4E86; info he salveof &#x4E4B;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;</span>
<span class="hljs-comment">#    slave &#x90FD;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A; &quot;SYNC with master in progress&quot; &#x7684;&#x9519;&#x8BEF;&#xFF0C;</span>
<span class="hljs-comment">#</span>
slave-serve-stale-data yes

<span class="hljs-comment"># &#x4ECE; redis 2.6 &#x7248;&#x8D77;&#xFF0C;&#x9ED8;&#x8BA4; slaves &#x90FD;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x4F5C;&#x4E3A;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#xFF08;yes&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6210;NO&#xFF0C;&#x7528;&#x4E8E;&#x5199;&#xFF08;&#x4E0D;&#x5EFA;&#x8BAE;&#xFF09;&#x3002;</span>
slave-read-only yes

<span class="hljs-comment"># &#x590D;&#x5236;&#x540C;&#x6B65;&#x7B56;&#x7565;: disk or socket.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># -------------------------------------------------------</span>
<span class="hljs-comment"># &#x8B66;&#x544A;:&#x65E0;&#x78C1;&#x76D8;&#x590D;&#x5236;&#x6B63;&#x5728;&#x5B9E;&#x9A8C;&#x4E2D;</span>
<span class="hljs-comment"># -------------------------------------------------------</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x65B0;&#x7684; slave &#x548C;&#x91CD;&#x8FDE;&#x540E;&#x4E0D;&#x80FD;&#x7EE7;&#x7EED;&#x5907;&#x4EFD;&#x7684; slave &#xFF0C;&#x9700;&#x8981;&#x505A;&#x6240;&#x8C13;&#x7684;&#x201C;&#x5B8C;&#x5168;&#x5907;&#x4EFD;&#x201D;&#xFF0C;&#x5373;&#x5C06;&#x4E00;&#x4E2A;RDB&#x6587;&#x4EF6;&#x4ECE; master &#x4F20;&#x9001;&#x5230; slave &#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x4F20;&#x9001;&#x6709;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</span>
<span class="hljs-comment">#   1&#xFF09;&#x786C;&#x76D8;&#x5907;&#x4EFD;&#xFF1A;redis  master &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x7528;&#x4E8E;&#x628A; RDB &#x6587;&#x4EF6;&#x5199;&#x5230;&#x786C;&#x76D8;&#x4E0A;&#x3002;&#x8FC7;&#x4E00;&#x4F1A;&#x513F;&#xFF0C;&#x5176;&#x7236;&#x8FDB;&#x7A0B;&#x9012;&#x589E;&#x5730;&#x5C06;&#x6587;&#x4EF6;&#x4F20;&#x9001;&#x7ED9; slave &#x3002;</span>
<span class="hljs-comment">#   2&#xFF09;&#x65E0;&#x786C;&#x76D8;&#x5907;&#x4EFD;&#xFF1A;redis  master &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5B50;&#x8FDB;&#x7A0B;&#x76F4;&#x63A5;&#x628A; RDB &#x6587;&#x4EF6;&#x5199;&#x5230; slave &#x7684;&#x5957;&#x63A5;&#x5B57;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7528;&#x5230;&#x786C;&#x76D8;&#x3002;</span>
<span class="hljs-comment">#   &#x5728;&#x786C;&#x76D8;&#x5907;&#x4EFD;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C; master &#x7684;&#x5B50;&#x8FDB;&#x7A0B;&#x751F;&#x6210; RDB &#x6587;&#x4EF6;&#x3002;&#x4E00;&#x65E6;&#x751F;&#x6210;&#xFF0C;&#x591A;&#x4E2A; slave &#x53EF;&#x4EE5;&#x7ACB;&#x5373;&#x6392;&#x6210;&#x961F;&#x5217;&#x4F7F;&#x7528; master &#x7684;RDB&#x6587;&#x4EF6;&#x3002;</span>
<span class="hljs-comment">#   &#x5982;&#x679C;&#x4F7F;&#x7528;&#x65E0;&#x786C;&#x76D8;&#x5907;&#x4EFD;&#xFF0C; master &#x4F1A;&#x5728;&#x5F00;&#x59CB;&#x4F20;&#x9001;&#x4E4B;&#x95F4;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF08;&#x53EF;&#x914D;&#x7F6E;&#xFF0C;&#x4EE5;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#xFF09;&#xFF0C;&#x5E0C;&#x671B;&#x7B49;&#x5F85;&#x591A;&#x4E2A;&#x5B50;&#x7AD9;&#x5230;&#x8FBE;&#x540E;&#x5E76;&#x884C;&#x4F20;&#x9001;&#x3002;</span>
<span class="hljs-comment">#   &#x5728;&#x786C;&#x76D8;&#x4F4E;&#x901F;&#x800C;&#x7F51;&#x7EDC;&#x9AD8;&#x901F;&#xFF08;&#x9AD8;&#x5E26;&#x5BBD;&#xFF09;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x65E0;&#x786C;&#x76D8;&#x5907;&#x4EFD;&#x66F4;&#x597D;&#x3002;</span>
repl-diskless-sync no

<span class="hljs-comment"># &#x5F53;&#x542F;&#x7528;&#x65E0;&#x786C;&#x76D8;&#x5907;&#x4EFD;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#x624D;&#x4F1A;&#x901A;&#x8FC7;&#x5957;&#x63A5;&#x5B57;&#x5411; slave &#x4F20;&#x9001; RDB &#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E2A;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x662F;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E00;&#x70B9;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x65E6;&#x4F20;&#x9001;&#x5F00;&#x59CB;&#xFF0C;&#x5C31;&#x4E0D;&#x53EF;&#x80FD;&#x518D;&#x4E3A;&#x4E00;&#x4E2A;&#x65B0;&#x5230;&#x8FBE;&#x7684; slave &#x670D;&#x52A1;&#x3002; slave &#x5219;&#x8981;&#x6392;&#x961F;&#x7B49;&#x5F85;&#x4E0B;&#x4E00;&#x6B21; RDB &#x4F20;&#x9001;&#x3002;</span>
<span class="hljs-comment"># &#x56E0;&#x6B64;&#x670D;&#x52A1;&#x5668;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4EE5;&#x671F;&#x66F4;&#x591A;&#x7684; slave &#x5230;&#x8FBE;&#x3002;</span>
<span class="hljs-comment"># &#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x4EE5;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 5 &#x79D2;&#x3002;&#x8981;&#x5173;&#x6389;&#x8FD9;&#x4E00;&#x529F;&#x80FD;&#xFF0C;&#x53EA;&#x9700;&#x5C06;&#x5B83;&#x8BBE;&#x7F6E;&#x4E3A;0&#x79D2;&#xFF0C;&#x4F20;&#x9001;&#x4F1A;&#x7ACB;&#x5373;&#x542F;&#x52A8;&#x3002;</span>
<span class="hljs-comment"># &#x4E00;&#x65E6;&#x590D;&#x5236;&#x5F00;&#x59CB;&#xFF0C;&#x8282;&#x70B9;&#x4E0D;&#x4F1A;&#x518D;&#x63A5;&#x6536;&#x65B0;slave&#x7684;&#x590D;&#x5236;&#x8BF7;&#x6C42;&#x76F4;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;rdb&#x4F20;&#x8F93;&#x3002;&#x6240;&#x4EE5;&#x6700;&#x597D;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x7B49;&#x66F4;&#x591A;&#x7684;slave&#x8FDE;&#x4E0A;&#x6765;&#x3002;</span>
repl-diskless-sync-delay 5

<span class="hljs-comment"># slave&#x6839;&#x636E;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;ping&#x8BF7;&#x6C42;&#x3002;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; repl_ping_slave_period &#x6765;&#x8BBE;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;10&#x79D2;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-ping-slave-period 10</span>

<span class="hljs-comment"># &#x590D;&#x5236;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;master&#x548C;slave&#x90FD;&#x6709;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x7684;&#x8BBE;&#x7F6E;&#x3002;</span>
<span class="hljs-comment"># master&#x68C0;&#x6D4B;&#x5230;slave&#x4E0A;&#x6B21;&#x53D1;&#x9001;&#x7684;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;repl-timeout&#xFF0C;&#x5373;&#x8BA4;&#x4E3A;slave&#x79BB;&#x7EBF;&#xFF0C;&#x6E05;&#x9664;&#x8BE5;slave&#x4FE1;&#x606F;&#x3002;</span>
<span class="hljs-comment"># slave&#x68C0;&#x6D4B;&#x5230;&#x4E0A;&#x6B21;&#x548C;master&#x4EA4;&#x4E92;&#x7684;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;repl-timeout&#xFF0C;&#x5219;&#x8BA4;&#x4E3A;master&#x79BB;&#x7EBF;&#x3002;</span>
<span class="hljs-comment"># &#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F; repl-timeout &#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6BD4; repl-ping-slave-period &#x66F4;&#x5927;&#x7684;&#x503C;&#xFF0C;&#x4E0D;&#x7136;&#x4F1A;&#x7ECF;&#x5E38;&#x68C0;&#x6D4B;&#x5230;&#x8D85;&#x65F6;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-timeout 60</span>

<span class="hljs-comment"># &#x662F;&#x5426;&#x7981;&#x6B62;&#x590D;&#x5236; tcp &#x94FE;&#x63A5;&#x7684; tcp nodelay &#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4F20;&#x9012; yes &#x6216;&#x8005; no&#x3002;</span>
<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x662F; no&#xFF0C;&#x5373;&#x4F7F;&#x7528; tcp nodelay&#x3002;&#x5982;&#x679C; master &#x8BBE;&#x7F6E;&#x4E86; yes &#x6765;&#x7981;&#x6B62; tcp nodelay &#x8BBE;&#x7F6E;&#xFF0C;</span>
<span class="hljs-comment"># &#x5728;&#x628A;&#x6570;&#x636E;&#x590D;&#x5236;&#x7ED9; slave &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x51CF;&#x5C11;&#x5305;&#x7684;&#x6570;&#x91CF;&#x548C;&#x66F4;&#x5C0F;&#x7684;&#x7F51;&#x7EDC;&#x5E26;&#x5BBD;&#x3002;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#x8FD9;&#x4E5F;&#x53EF;&#x80FD;&#x5E26;&#x6765;&#x6570;&#x636E;&#x7684;&#x5EF6;&#x8FDF;&#x3002;</span>
<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x6211;&#x4EEC;&#x63A8;&#x8350;&#x66F4;&#x5C0F;&#x7684;&#x5EF6;&#x8FDF;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x6570;&#x636E;&#x91CF;&#x4F20;&#x8F93;&#x5F88;&#x5927;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x5EFA;&#x8BAE;&#x9009;&#x62E9; yes&#x3002;</span>
repl-disable-tcp-nodelay no

<span class="hljs-comment"># &#x590D;&#x5236;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x73AF;&#x5F62;&#x590D;&#x5236;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x6700;&#x65B0;&#x590D;&#x5236;&#x7684;&#x547D;&#x4EE4;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x6837;&#x5728;slave&#x79BB;&#x7EBF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x590D;&#x5236; master &#x7684;&#x6570;&#x636E;&#xFF0C;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x90E8;&#x5206;&#x540C;&#x6B65;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x628A;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x90E8;&#x5206;&#x6570;&#x636E;&#x590D;&#x5236;&#x7ED9; slave&#xFF0C;&#x5C31;&#x80FD;&#x6062;&#x590D;&#x6B63;&#x5E38;&#x590D;&#x5236;&#x72B6;&#x6001;&#x3002;</span>
<span class="hljs-comment"># &#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#x8D8A;&#x5927;&#xFF0C;slave &#x79BB;&#x7EBF;&#x7684;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x66F4;&#x957F;&#xFF0C;&#x590D;&#x5236;&#x7F13;&#x51B2;&#x533A;&#x53EA;&#x6709;&#x5728;&#x6709; slave &#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x624D;&#x5206;&#x914D;&#x5185;&#x5B58;&#x3002;</span>
<span class="hljs-comment"># &#x6CA1;&#x6709; slave &#x7684;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x5185;&#x5B58;&#x4F1A;&#x88AB;&#x91CA;&#x653E;&#x51FA;&#x6765;&#xFF0C;&#x9ED8;&#x8BA4; 1mb&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-backlog-size 1mb</span>

<span class="hljs-comment">#  master &#x6709;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x6CA1;&#x6709;&#x4E0E; slave &#x8FDE;&#x63A5;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x5DE5;&#x4F5C;&#x50A8;&#x5907;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x7528;&#x4E8E;&#x914D;&#x7F6E;&#x91CA;&#x653E;&#x524D;&#x7B49;&#x5F85;&#x7684;&#x79D2;&#x6570;&#xFF0C;&#x79D2;&#x6570;&#x4ECE;&#x65AD;&#x5F00;&#x7684;&#x90A3;&#x4E00;&#x523B;&#x5F00;&#x59CB;&#x8BA1;&#x7B97;&#xFF0C;&#x503C;&#x4E3A; 0 &#x8868;&#x793A;&#x4E0D;&#x91CA;&#x653E;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-backlog-ttl 3600</span>

<span class="hljs-comment"># &#x5F53; master &#x4E0D;&#x53EF;&#x7528;&#xFF0C;sentinel &#x4F1A;&#x6839;&#x636E; slave &#x7684;&#x4F18;&#x5148;&#x7EA7;&#x9009;&#x4E3E;&#x4E00;&#x4E2A; master&#x3002;</span>
<span class="hljs-comment"># &#x6700;&#x4F4E;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x7684; slave&#xFF0C;&#x5F53;&#x9009; master&#x3002;</span>
<span class="hljs-comment"># &#x56E0;&#x6B64;&#x5982;&#x679C;&#x6709;&#x4E09;&#x4E2A; slave &#x4F18;&#x5148;&#x7EA7;&#x5206;&#x522B;&#x662F; 10&#xFF0C;100&#xFF0C;25&#xFF0C;sentinel &#x4F1A;&#x9009;&#x62E9;&#x4F18;&#x5148;&#x7EA7;&#x4E3A; 10 &#x7684; slave </span>
<span class="hljs-comment"># &#x800C;&#x914D;&#x7F6E;&#x6210; 0&#xFF0C;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x88AB;&#x9009;&#x4E3E;&#x3002;</span>
slave-priority 100

<span class="hljs-comment"># redis&#x63D0;&#x4F9B;&#x4E86;&#x53EF;&#x4EE5;&#x8BA9;master&#x505C;&#x6B62;&#x5199;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x4E86;min-slaves-to-write&#xFF0C;</span>
<span class="hljs-comment"># &#x5065;&#x5EB7;&#x7684;slave&#x7684;&#x4E2A;&#x6570;&#x5C0F;&#x4E8E;N&#xFF0C;mater&#x5C31;&#x7981;&#x6B62;&#x5199;&#x5165;&#x3002;master&#x6700;&#x5C11;&#x5F97;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x5065;&#x5EB7;&#x7684;slave&#x5B58;&#x6D3B;&#x624D;&#x80FD;&#x6267;&#x884C;&#x5199;&#x547D;&#x4EE4;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x867D;&#x7136;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;N&#x4E2A;slave&#x90FD;&#x4E00;&#x5B9A;&#x80FD;&#x63A5;&#x6536;&#x5230;master&#x7684;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#x80FD;&#x907F;&#x514D;&#x6CA1;&#x6709;&#x8DB3;&#x591F;&#x5065;&#x5EB7;&#x7684;slave&#x7684;&#x65F6;&#x5019;&#xFF0C;master&#x4E0D;&#x80FD;&#x5199;&#x5165;&#x6765;&#x907F;&#x514D;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;</span>
<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x4E3A;0&#x662F;&#x5173;&#x95ED;&#x8BE5;&#x529F;&#x80FD;&#x3002;</span>
<span class="hljs-comment"># &#x5EF6;&#x8FDF;&#x5C0F;&#x4E8E;min-slaves-max-lag&#x79D2;&#x7684;slave&#x624D;&#x8BA4;&#x4E3A;&#x662F;&#x5065;&#x5EB7;&#x7684;slave&#x3002;</span>
<span class="hljs-comment">#  master &#x53EF;&#x4EE5;&#x505C;&#x6B62;&#x63A5;&#x53D7;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x5F53;&#x4E0E;&#x5B83;&#x8FDE;&#x63A5;&#x7684; slave &#x5C11;&#x4E8E;N&#x4E2A;&#xFF0C;&#x6EDE;&#x540E;&#x5C11;&#x4E8E;M&#x79D2;&#xFF0C;N&#x4E2A; slave &#x5FC5;&#x987B;&#x662F;&#x5728;&#x7EBF;&#x72B6;&#x6001;&#x3002;</span>
<span class="hljs-comment"># &#x5EF6;&#x8FDF;&#x7684;&#x79D2;&#x6570;&#x5FC5;&#x987B;&lt;=&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x503C;&#xFF0C;&#x5EF6;&#x8FDF;&#x79D2;&#x6570;&#x662F;&#x4ECE;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x6536;&#x5230;&#x7684;&#x6765;&#x81EA; slave &#x7684;ping&#x5F00;&#x59CB;&#x8BA1;&#x7B97;&#x3002;ping&#x901A;&#x5E38;&#x662F;&#x6BCF;&#x79D2;&#x4E00;&#x6B21;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E00;&#x9009;&#x9879;&#x5E76;&#x4E0D;&#x4FDD;&#x8BC1;N&#x4E2A;&#x5907;&#x4EFD;&#x90FD;&#x4F1A;&#x63A5;&#x53D7;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x9650;&#x5236;&#x5728;&#x6307;&#x5B9A;&#x79D2;&#x6570;&#x5185;&#x7531;&#x4E8E; slave &#x6570;&#x91CF;&#x4E0D;&#x591F;&#x5BFC;&#x81F4;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x4E22;&#x5931;&#x7684;&#x60C5;&#x51B5;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x60F3;&#x8981;&#x81F3;&#x5C11;3&#x4E2A; slave &#x4E14;&#x5EF6;&#x8FDF;&#x5C11;&#x4E8E;10&#x79D2;&#xFF0C;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x5373;&#x53EF;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># min-slaves-to-write 3</span>
<span class="hljs-comment"># min-slaves-max-lag 10</span>

<span class="hljs-comment"># Redis master&#x80FD;&#x591F;&#x4EE5;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x5217;&#x51FA;&#x6240;&#x8FDE;&#x63A5;slave&#x7684;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x3002; </span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#xFF0C;&#x201C;INFO replication&#x201D;&#x90E8;&#x5206;&#x63D0;&#x4F9B;&#x6B64;&#x4FE1;&#x606F;&#xFF0C;&#x9664;&#x4E86;&#x5176;&#x4ED6;&#x5DE5;&#x5177;&#x4E4B;&#x5916;&#xFF0C;Redis Sentinel&#x8FD8;&#x4F7F;&#x7528;&#x8BE5;&#x4FE1;&#x606F;&#x6765;&#x53D1;&#x73B0;slave&#x5B9E;&#x4F8B;&#x3002;</span>
<span class="hljs-comment"># &#x6B64;&#x4FE1;&#x606F;&#x53EF;&#x7528;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#x5728;masterser&#x7684;&#x201C;ROLE&#x201D;&#x547D;&#x4EE4;&#x7684;&#x8F93;&#x51FA;&#x4E2D;&#x3002;</span>
<span class="hljs-comment"># &#x901A;&#x5E38;&#x7531;slave&#x62A5;&#x544A;&#x7684;&#x5217;&#x51FA;&#x7684;IP&#x548C;&#x5730;&#x5740;,&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x83B7;&#x5F97;&#xFF1A;</span>
<span class="hljs-comment"># IP&#xFF1A;&#x901A;&#x8FC7;&#x68C0;&#x67E5;slave&#x4E0E;master&#x8FDE;&#x63A5;&#x4F7F;&#x7528;&#x7684;&#x5957;&#x63A5;&#x5B57;&#x7684;&#x5BF9;&#x7B49;&#x4F53;&#x5730;&#x5740;&#x81EA;&#x52A8;&#x68C0;&#x6D4B;&#x5730;&#x5740;&#x3002;</span>
<span class="hljs-comment"># &#x7AEF;&#x53E3;&#xFF1A;&#x7AEF;&#x53E3;&#x5728;&#x590D;&#x5236;&#x63E1;&#x624B;&#x671F;&#x95F4;&#x7531;slavet&#x901A;&#x4FE1;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x5E38;&#x662F;slave&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x5217;&#x51FA;&#x8FDE;&#x63A5;&#x7684;&#x7AEF;&#x53E3;&#x3002;</span>
<span class="hljs-comment"># &#x7136;&#x800C;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;&#x7AEF;&#x53E3;&#x8F6C;&#x53D1;&#x6216;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x8F6C;&#x6362;&#xFF08;NAT&#xFF09;&#x65F6;&#xFF0C;slave&#x5B9E;&#x9645;&#x4E0A;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;(&#x4E0D;&#x540C;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#x5BF9;)&#x6765;&#x5230;&#x8FBE;&#x3002; </span>
<span class="hljs-comment"># slave&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x4EE5;&#x4FBF;&#x5411;master&#x62A5;&#x544A;&#x4E00;&#x7EC4;&#x7279;&#x5B9A;&#x7684;IP&#x548C;&#x7AEF;&#x53E3;&#xFF0C;</span>
<span class="hljs-comment"># &#x4EE5;&#x4FBF;INFO&#x548C;ROLE&#x5C06;&#x62A5;&#x544A;&#x8FD9;&#x4E9B;&#x503C;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x4EC5;&#x8986;&#x76D6;&#x7AEF;&#x53E3;&#x6216;IP&#x5730;&#x5740;&#xFF0C;&#x5219;&#x6CA1;&#x5FC5;&#x8981;&#x4F7F;&#x7528;&#x8FD9;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># slave-announce-ip 5.5.5.5</span>
<span class="hljs-comment"># slave-announce-port 1234</span>

<span class="hljs-comment">################################## &#x5B89;&#x5168; ###################################</span>

<span class="hljs-comment"># requirepass&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x8BA9;&#x7528;&#x6237;&#x4F7F;&#x7528;AUTH&#x547D;&#x4EE4;&#x6765;&#x8BA4;&#x8BC1;&#x5BC6;&#x7801;&#xFF0C;&#x624D;&#x80FD;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x8BA9;redis&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x4E0D;&#x53D7;&#x4FE1;&#x4EFB;&#x7684;&#x7F51;&#x7EDC;&#x4E2D;&#x3002;</span>
<span class="hljs-comment"># &#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x5411;&#x540E;&#x7684;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x6CE8;&#x91CA;&#x8BE5;&#x547D;&#x4EE4;&#xFF0C;&#x56E0;&#x4E3A;&#x5927;&#x90E8;&#x5206;&#x7528;&#x6237;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x8BA4;&#x8BC1;&#x3002;</span>
<span class="hljs-comment"># &#x4F7F;&#x7528;requirepass&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x56E0;&#x4E3A;redis&#x592A;&#x5FEB;&#x4E86;&#xFF0C;&#x6BCF;&#x79D2;&#x53EF;&#x4EE5;&#x8BA4;&#x8BC1;15w&#x6B21;&#x5BC6;&#x7801;&#xFF0C;</span>
<span class="hljs-comment"># &#x7B80;&#x5355;&#x7684;&#x5BC6;&#x7801;&#x5F88;&#x5BB9;&#x6613;&#x88AB;&#x653B;&#x7834;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x597D;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x66F4;&#x590D;&#x6742;&#x7684;&#x5BC6;&#x7801;&#x3002;</span>
<span class="hljs-comment"># requirepass foobared</span>

<span class="hljs-comment"># &#x628A;&#x5371;&#x9669;&#x7684;&#x547D;&#x4EE4;&#x7ED9;&#x4FEE;&#x6539;&#x6210;&#x5176;&#x4ED6;&#x540D;&#x79F0;&#x3002;</span>
<span class="hljs-comment"># &#x6BD4;&#x5982;CONFIG&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x91CD;&#x547D;&#x540D;&#x4E3A;&#x4E00;&#x4E2A;&#x5F88;&#x96BE;&#x88AB;&#x731C;&#x5230;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x8FD9;&#x6837;&#x7528;&#x6237;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x5185;&#x90E8;&#x5DE5;&#x5177;&#x8FD8;&#x80FD;&#x63A5;&#x7740;&#x4F7F;&#x7528;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x4F60;&#x628A;&#x67D0;&#x4E2A;&#x547D;&#x4EE4;&#x91CD;&#x547D;&#x540D;&#x6210;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x7B49;&#x4E8E;&#x53D6;&#x6D88;&#x4E86;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x4F8B;&#x5982;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span>
<span class="hljs-comment"># rename-command CONFIG &quot;&quot;</span>

<span class="hljs-comment">################################### &#x5BA2;&#x6237;&#x7AEF; ####################################</span>

<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x80FD;&#x8FDE;&#x4E0A;redis&#x7684;&#x6700;&#x5927;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#x3002;</span>
<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x65E0;&#x9650;&#x5236;&#xFF0C;Redis&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6253;&#x5F00;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#x4E3A;Redis&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x6570;</span>
<span class="hljs-comment"># &#x7531;&#x4E8E;redis&#x4E0D;&#x533A;&#x5206;&#x8FDE;&#x63A5;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x8FD8;&#x662F;&#x5185;&#x90E8;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x548C;slave&#x8FDE;&#x63A5;&#x7B49;&#xFF0C;&#x6240;&#x4EE5;maxclients&#x6700;&#x5C0F;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x5230;32&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x8D85;&#x8FC7;&#x4E86;maxclients&#xFF0C;redis&#x4F1A;&#x7ED9;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x53D1;&#x9001;&#x2019;max number of clients reached&#x2019;&#xFF0C;&#x5E76;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># maxclients 10000</span>

<span class="hljs-comment">############################## &#x5185;&#x5B58;&#x7BA1;&#x7406; ################################</span>

<span class="hljs-comment"># redis&#x914D;&#x7F6E;&#x7684;&#x6700;&#x5927;&#x5185;&#x5B58;&#x5BB9;&#x91CF;&#x3002;&#x5F53;&#x5185;&#x5B58;&#x6EE1;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x5408;maxmemory-policy&#x7B56;&#x7565;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;slave&#x7684;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x533A;&#x662F;&#x4E0D;&#x8BA1;&#x7B97;&#x5728;maxmemory&#x5185;&#x7684;&#x3002;</span>
<span class="hljs-comment"># &#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x4E3B;&#x673A;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5B8C;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x7684;maxmemory&#x9700;&#x8981;&#x66F4;&#x5C0F;&#x4E00;&#x4E9B;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># maxmemory &lt;bytes&gt;</span>

<span class="hljs-comment"># &#x5185;&#x5B58;&#x5BB9;&#x91CF;&#x8D85;&#x8FC7;maxmemory&#x540E;&#x7684;&#x5904;&#x7406;&#x7B56;&#x7565;&#x3002;</span>
<span class="hljs-comment"># volatile-lru&#xFF1A;&#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key&#x3002;</span>
<span class="hljs-comment"># volatile-random&#xFF1A;&#x968F;&#x673A;&#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key&#x3002;</span>
<span class="hljs-comment"># volatile-ttl&#xFF1A;&#x79FB;&#x9664;&#x5373;&#x5C06;&#x8FC7;&#x671F;&#x7684;key&#xFF0C;&#x6839;&#x636E;&#x6700;&#x8FD1;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x6765;&#x5220;&#x9664;&#xFF08;&#x8F85;&#x4EE5;TTL&#xFF09;</span>
<span class="hljs-comment"># allkeys-lru&#xFF1A;&#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key&#x3002;</span>
<span class="hljs-comment"># allkeys-random&#xFF1A;&#x968F;&#x673A;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key&#x3002;</span>
<span class="hljs-comment"># noeviction&#xFF1A;&#x4E0D;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key&#xFF0C;&#x53EA;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5199;&#x9519;&#x8BEF;&#x3002;</span>
<span class="hljs-comment"># &#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x4E9B;&#x9A71;&#x9010;&#x7B56;&#x7565;&#xFF0C;&#x5982;&#x679C;redis&#x6CA1;&#x6709;&#x5408;&#x9002;&#x7684;key&#x9A71;&#x9010;&#xFF0C;&#x5BF9;&#x4E8E;&#x5199;&#x547D;&#x4EE4;&#xFF0C;&#x8FD8;&#x662F;&#x4F1A;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x3002;</span>
<span class="hljs-comment"># redis&#x5C06;&#x4E0D;&#x518D;&#x63A5;&#x6536;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x53EA;&#x63A5;&#x6536;get&#x8BF7;&#x6C42;&#x3002;</span>
<span class="hljs-comment"># &#x5199;&#x547D;&#x4EE4;&#x5305;&#x62EC;&#xFF1A;</span>
<span class="hljs-comment"># set setnx setex append incr decr rpush lpush rpushx lpushx linsert lset </span>
<span class="hljs-comment"># rpoplpush sadd sinter sinterstore sunion sunionstore sdiff sdiffstore zadd </span>
<span class="hljs-comment"># zincrby zunionstore zinterstore hset hsetnx hmset hincrby incrby </span>
<span class="hljs-comment"># decrby getset mset msetnx exec sort&#x3002;</span>
<span class="hljs-comment"># maxmemory-policy noeviction</span>

<span class="hljs-comment"># lru&#x68C0;&#x6D4B;&#x7684;&#x6837;&#x672C;&#x6570;&#x3002;&#x4F7F;&#x7528;lru&#x6216;&#x8005;ttl&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF0C;&#x4ECE;&#x9700;&#x8981;&#x6DD8;&#x6C70;&#x7684;&#x5217;&#x8868;&#x4E2D;&#x968F;&#x673A;&#x9009;&#x62E9;sample&#x4E2A;key&#xFF0C;&#x9009;&#x51FA;&#x95F2;&#x7F6E;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;key&#x79FB;&#x9664;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># maxmemory-samples 5</span>

<span class="hljs-comment">############################# LAZY FREEING ####################################</span>

<span class="hljs-comment"># Redis&#x6709;&#x4E24;&#x4E2A;&#x539F;&#x8BED;&#x6765;&#x5220;&#x9664;&#x952E;&#x3002;&#x4E00;&#x79CD;&#x53EB;&#x505A;DEL&#xFF0C;&#x662F;&#x5BF9;&#x5BF9;&#x8C61;&#x7684;&#x963B;&#x585E;&#x5220;&#x9664;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x610F;&#x5473;&#x7740;&#x670D;&#x52A1;&#x5668;&#x505C;&#x6B62;&#x5904;&#x7406;&#x65B0;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x4EE5;&#x4FBF;&#x4EE5;&#x540C;&#x6B65;&#x65B9;&#x5F0F;&#x56DE;&#x6536;&#x4E0E;&#x5BF9;&#x8C61;&#x76F8;&#x5173;&#x8054;&#x7684;&#x6240;&#x6709;&#x5185;&#x5B58;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x88AB;&#x5220;&#x9664;&#x7684;&#x952E;&#x4E0E;&#x4E00;&#x4E2A;&#x5C0F;&#x5BF9;&#x8C61;&#x76F8;&#x5173;&#x8054;&#xFF0C;&#x90A3;&#x4E48;&#x6267;&#x884C;DEL&#x547D;&#x4EE4;&#x6240;&#x9700;&#x7684;&#x65F6;&#x95F4;&#x975E;&#x5E38;&#x5C0F;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x4E0E;Redis&#x4E2D;&#x7684;&#x5927;&#x591A;&#x6570;O&#xFF08;1&#xFF09;&#x6216;O&#xFF08;logn&#xFF09;&#x547D;&#x4EE4;&#x76F8;&#x5AB2;&#x7F8E;&#x3002;</span>
<span class="hljs-comment"># &#x7136;&#x800C;&#xFF0C;&#x5982;&#x679C;&#x5BC6;&#x94A5;&#x4E0E;&#x5305;&#x542B;&#x6570;&#x767E;&#x4E07;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x805A;&#x5408;&#x503C;&#x76F8;&#x5173;&#x8054;&#xFF0C;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x53EF;&#x4EE5;&#x963B;&#x585E;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#xFF08;&#x751A;&#x81F3;&#x51E0;&#x79D2;&#xFF09;&#xFF0C;&#x4EE5;&#x5B8C;&#x6210;&#x64CD;&#x4F5C;&#x3002;</span>
<span class="hljs-comment"># &#x51FA;&#x4E8E;&#x4EE5;&#x4E0A;&#x539F;&#x56E0;&#xFF0C;Redis&#x8FD8;&#x63D0;&#x4F9B;&#x975E;&#x963B;&#x585E;&#x5220;&#x9664;&#x539F;&#x8BED;&#xFF0C;&#x5982;UNLINK&#xFF08;&#x975E;&#x963B;&#x585E;DEL&#xFF09;&#x548C;FLUSHALL&#x548C;FLUSHDB&#x547D;&#x4EE4;&#x7684;&#x5F02;&#x6B65;&#x9009;&#x9879;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x540E;&#x53F0;&#x56DE;&#x6536;&#x5185;&#x5B58;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x662F;&#x5728;&#x56FA;&#x5B9A;&#x65F6;&#x95F4;&#x6267;&#x884C;&#x7684;&#x3002;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F1A;&#x4EE5;&#x6700;&#x5FEB;&#x7684;&#x901F;&#x5EA6;&#x5728;&#x540E;&#x53F0;&#x4EE5;&#x589E;&#x91CF;&#x65B9;&#x5F0F;&#x91CA;&#x653E;&#x5BF9;&#x8C61;&#x3002;</span>
<span class="hljs-comment"># DEL&#x3001;UNLINK&#x548C;FLUSHDB&#x7684;&#x5F02;&#x6B65;&#x9009;&#x9879;&#x662F;&#x7528;&#x6237;&#x63A7;&#x5236;&#x7684;&#x3002;&#x8FD9;&#x53D6;&#x51B3;&#x4E8E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x4EE5;&#x4E86;&#x89E3;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x6216;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x4E3B;&#x610F;&#x3002;</span>
<span class="hljs-comment"># &#x7136;&#x800C;&#xFF0C;Redis&#x670D;&#x52A1;&#x5668;&#x6709;&#x65F6;&#x4E0D;&#x5F97;&#x4E0D;&#x5220;&#x9664;&#x952E;&#x6216;&#x5237;&#x65B0;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F5C;&#x4E3A;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x7684;&#x526F;&#x4F5C;&#x7528;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;Redis&#x5728;&#x4EE5;&#x4E0B;&#x573A;&#x666F;&#x4E2D;&#x72EC;&#x7ACB;&#x4E8E;&#x7528;&#x6237;&#x8C03;&#x7528;&#x5220;&#x9664;&#x5BF9;&#x8C61;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) &#x5728;&#x88AB;&#x9A71;&#x9010;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7531;&#x4E8E;maxmemory&#x548C;maxmemory&#x653F;&#x7B56;&#x914D;&#x7F6E;&#xFF0C;&#x4E3A;&#x4E86;&#x4E3A;&#x65B0;&#x6570;&#x636E;&#x817E;&#x51FA;&#x7A7A;&#x95F4;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x8D85;&#x8FC7;&#x6307;&#x5B9A;&#x7684;&#x5185;&#x5B58;&#x9650;&#x5236;&#x3002;</span>
<span class="hljs-comment"># 2) &#x56E0;&#x4E3A;&#x8FC7;&#x671F;&#xFF1A;&#x5F53;&#x4E00;&#x4E2A;&#x6709;&#x5173;&#x8054;&#x65F6;&#x95F4;&#x7684;&#x952E;&#xFF08;&#x89C1;&#x8FC7;&#x671F;&#x547D;&#x4EE4;&#xFF09;&#x5FC5;&#x987B;&#x4ECE;&#x5185;&#x5B58;&#x4E2D;&#x5220;&#x9664;&#x3002;</span>
<span class="hljs-comment"># 3) &#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x526F;&#x4F5C;&#x7528;&#xFF0C;&#x5B83;&#x5C06;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684;&#x952E;&#x4E0A;&#x3002;</span>
<span class="hljs-comment">#    &#x4F8B;&#x5982;&#xFF0C;RENAME&#x547D;&#x4EE4;&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x66FF;&#x6362;&#x65E7;&#x94A5;&#x5319;&#x5185;&#x5BB9;&#x65F6;&#x5220;&#x9664;&#x53E6;&#x4E00;&#x4E2A;&#x3002;</span>
<span class="hljs-comment">#    &#x7C7B;&#x4F3C;&#x7684;&#xFF0C;SUNIONSTORE&#x6216;SORT&#x5546;&#x5E97;&#x9009;&#x9879;&#x53EF;&#x4EE5;&#x5220;&#x9664;&#x73B0;&#x6709;&#x7684;&#x5BC6;&#x94A5;&#x3002;SET&#x547D;&#x4EE4;&#x672C;&#x8EAB;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x94A5;&#x5319;&#x7684;&#x4EFB;&#x4F55;&#x65E7;&#x5185;&#x5BB9;&#xFF0C;&#x4EE5;&#x4FBF;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362;&#x5B83;&#x3002;</span>
<span class="hljs-comment"># 4) &#x5728;&#x590D;&#x5236;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x4ECE;&#x670D;&#x52A1;&#x4E0E;&#x5B83;&#x7684;&#x4E3B;&#x670D;&#x52A1;&#x6267;&#x884C;&#x5B8C;&#x5168;&#x7684;&#x91CD;&#x65B0;&#x540C;&#x6B65;&#x65F6;&#xFF0C;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5185;&#x5BB9;&#x5C06;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x4EE5;&#x4FBF;&#x52A0;&#x8F7D;&#x521A;&#x521A;&#x4F20;&#x8F93;&#x7684;RDB&#x6587;&#x4EF6;&#x3002;</span>
<span class="hljs-comment"># &#x5728;&#x4E0A;&#x8FF0;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x4EE5;&#x963B;&#x585E;&#x65B9;&#x5F0F;&#x5220;&#x9664;&#x5BF9;&#x8C61;&#xFF0C;&#x5C31;&#x50CF;&#x8C03;&#x7528;DEL&#x4E00;&#x6837;&#x3002;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4E13;&#x95E8;&#x914D;&#x7F6E;&#x6BCF;&#x4E2A;&#x6848;&#x4F8B;&#xFF0C;&#x4EE5;&#x4FBF;&#x4EE5;&#x975E;&#x963B;&#x585E;&#x65B9;&#x5F0F;&#x91CA;&#x653E;&#x5185;&#x5B58;&#xFF0C;&#x5C31;&#x50CF;&#x8C03;&#x7528;UNLINK&#x4E00;&#x6837;&#xFF0C;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#x6307;&#x4EE4;&#xFF1A;</span>
lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del no
slave-lazy-flush no

<span class="hljs-comment">############################## &#x53EA;&#x9644;&#x52A0;&#x6A21;&#x5F0F;(AOF) ###############################</span>

<span class="hljs-comment"># &#x9ED8;&#x8BA4;redis&#x4F7F;&#x7528;&#x7684;&#x662F;rdb&#x65B9;&#x5F0F;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5728;&#x8BB8;&#x591A;&#x5E94;&#x7528;&#x4E2D;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x7528;&#x4E86;&#x3002;</span>
<span class="hljs-comment"># &#x4F46;&#x662F;redis&#x5982;&#x679C;&#x4E2D;&#x9014;&#x5B95;&#x673A;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x53EF;&#x80FD;&#x6709;&#x51E0;&#x5206;&#x949F;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#xFF0C;&#x6839;&#x636E;save&#x7684;&#x7B56;&#x7565;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#xFF0C;</span>
<span class="hljs-comment"># Append Only File&#x662F;&#x53E6;&#x4E00;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x66F4;&#x597D;&#x7684;&#x6301;&#x4E45;&#x5316;&#x7279;&#x6027;&#x3002;</span>
<span class="hljs-comment"># Redis&#x4F1A;&#x628A;&#x6BCF;&#x6B21;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x5728;&#x63A5;&#x6536;&#x540E;&#x90FD;&#x5199;&#x5165; appendonly.aof &#x6587;&#x4EF6;&#xFF0C;</span>
<span class="hljs-comment"># &#x6BCF;&#x6B21;&#x542F;&#x52A8;&#x65F6;Redis&#x90FD;&#x4F1A;&#x5148;&#x628A;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x8BFB;&#x5165;&#x5185;&#x5B58;&#x91CC;&#xFF0C;&#x5148;&#x5FFD;&#x7565;RDB&#x6587;&#x4EF6;&#x3002;</span>
appendonly no

<span class="hljs-comment"># aof&#x6587;&#x4EF6;&#x540D;</span>
appendfilename <span class="hljs-string">&quot;appendonly.aof&quot;</span>

<span class="hljs-comment"># aof&#x6301;&#x4E45;&#x5316;&#x7B56;&#x7565;&#x7684;&#x914D;&#x7F6E;</span>
<span class="hljs-comment"># no&#x8868;&#x793A;&#x4E0D;&#x6267;&#x884C;fsync&#xFF0C;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x901F;&#x5EA6;&#x6700;&#x5FEB;&#x3002;</span>
<span class="hljs-comment"># always&#x8868;&#x793A;&#x6BCF;&#x6B21;&#x5199;&#x5165;&#x90FD;&#x6267;&#x884C;fsync&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;&#x78C1;&#x76D8;&#x3002;</span>
<span class="hljs-comment"># everysec&#x8868;&#x793A;&#x6BCF;&#x79D2;&#x6267;&#x884C;&#x4E00;&#x6B21;fsync&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E22;&#x5931;&#x8FD9;1s&#x6570;&#x636E;&#x3002;</span>

<span class="hljs-comment"># appendfsync always</span>
appendfsync everysec
<span class="hljs-comment"># appendfsync no</span>

<span class="hljs-comment"># &#x5728;aof&#x91CD;&#x5199;&#x6216;&#x8005;&#x5199;&#x5165;rdb&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x5927;&#x91CF;IO&#xFF0C;&#x6B64;&#x65F6;&#x5BF9;&#x4E8E;everysec&#x548C;always&#x7684;aof&#x6A21;&#x5F0F;&#x6765;&#x8BF4;&#xFF0C;&#x6267;&#x884C;fsync&#x4F1A;&#x9020;&#x6210;&#x963B;&#x585E;&#x8FC7;&#x957F;&#x65F6;&#x95F4;&#xFF0C;</span>
<span class="hljs-comment"># no-appendfsync-on-rewrite&#x5B57;&#x6BB5;&#x8BBE;&#x7F6E;&#x4E3A;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E3A;no&#x3002;&#x5982;&#x679C;&#x5BF9;&#x5EF6;&#x8FDF;&#x8981;&#x6C42;&#x5F88;&#x9AD8;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x5426;&#x5219;&#x8FD8;&#x662F;&#x8BBE;&#x7F6E;&#x4E3A;no&#xFF0C;</span>
<span class="hljs-comment"># &#x8FD9;&#x6837;&#x5BF9;&#x6301;&#x4E45;&#x5316;&#x7279;&#x6027;&#x6765;&#x8BF4;&#x8FD9;&#x662F;&#x66F4;&#x5B89;&#x5168;&#x7684;&#x9009;&#x62E9;&#x3002;</span>
<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x4E3A;yes&#x8868;&#x793A;rewrite&#x671F;&#x95F4;&#x5BF9;&#x65B0;&#x5199;&#x64CD;&#x4F5C;&#x4E0D;fsync,&#x6682;&#x65F6;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;,&#x7B49;rewrite&#x5B8C;&#x6210;&#x540E;&#x518D;&#x5199;&#x5165;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;no&#xFF0C;&#x5EFA;&#x8BAE;yes&#x3002;</span>
<span class="hljs-comment"># Linux&#x7684;&#x9ED8;&#x8BA4;fsync&#x7B56;&#x7565;&#x662F;30&#x79D2;&#x3002;&#x53EF;&#x80FD;&#x4E22;&#x5931;30&#x79D2;&#x6570;&#x636E;&#x3002;</span>
no-appendfsync-on-rewrite no

<span class="hljs-comment"># aof&#x81EA;&#x52A8;&#x91CD;&#x5199;&#x914D;&#x7F6E;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x76EE;&#x524D;aof&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x4E0A;&#x4E00;&#x6B21;&#x91CD;&#x5199;&#x7684;aof&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x7684;&#x767E;&#x5206;&#x4E4B;&#x591A;&#x5C11;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#xFF0C;</span>
<span class="hljs-comment"># &#x5373;&#x5F53;aof&#x6587;&#x4EF6;&#x589E;&#x957F;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;Redis&#x80FD;&#x591F;&#x8C03;&#x7528;bgrewriteaof&#x5BF9;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x524D;AOF&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x662F;&#x4E0A;&#x6B21;&#x65E5;&#x5FD7;&#x91CD;&#x5199;&#x5F97;&#x5230;AOF&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x7684;&#x4E8C;&#x500D;&#xFF08;&#x8BBE;&#x7F6E;&#x4E3A;100&#xFF09;&#x65F6;&#xFF0C;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x65B0;&#x7684;&#x65E5;&#x5FD7;&#x91CD;&#x5199;&#x8FC7;&#x7A0B;&#x3002;</span>
auto-aof-rewrite-percentage 100

<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x5141;&#x8BB8;&#x91CD;&#x5199;&#x7684;&#x6700;&#x5C0F;aof&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x8FBE;&#x5230;&#x7EA6;&#x5B9A;&#x767E;&#x5206;&#x6BD4;&#x4F46;&#x5C3A;&#x5BF8;&#x4ECD;&#x7136;&#x5F88;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#x8FD8;&#x8981;&#x91CD;&#x5199;</span>
auto-aof-rewrite-min-size 64mb

<span class="hljs-comment"># aof&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x5728;&#x5C3E;&#x90E8;&#x662F;&#x4E0D;&#x5B8C;&#x6574;&#x7684;&#xFF0C;&#x5F53;redis&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;aof&#x6587;&#x4EF6;&#x7684;&#x6570;&#x636E;&#x88AB;&#x8F7D;&#x5165;&#x5185;&#x5B58;&#x3002;</span>
<span class="hljs-comment"># &#x91CD;&#x542F;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x5728;redis&#x6240;&#x5728;&#x7684;&#x4E3B;&#x673A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5B95;&#x673A;&#x540E;&#xFF0C;&#x5C24;&#x5176;&#x5728;ext4&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6CA1;&#x6709;&#x52A0;&#x4E0A;data=ordered&#x9009;&#x9879;&#xFF08;redis&#x5B95;&#x673A;&#x6216;&#x8005;&#x5F02;&#x5E38;&#x7EC8;&#x6B62;&#x4E0D;&#x4F1A;&#x9020;&#x6210;&#x5C3E;&#x90E8;&#x4E0D;&#x5B8C;&#x6574;&#x73B0;&#x8C61;&#x3002;&#xFF09;</span>
<span class="hljs-comment"># &#x51FA;&#x73B0;&#x8FD9;&#x79CD;&#x73B0;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x8BA9;redis&#x9000;&#x51FA;&#xFF0C;&#x6216;&#x8005;&#x5BFC;&#x5165;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x9009;&#x62E9;&#x7684;&#x662F;yes&#xFF0C;&#x5F53;&#x622A;&#x65AD;&#x7684;aof&#x6587;&#x4EF6;&#x88AB;&#x5BFC;&#x5165;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x53D1;&#x5E03;&#x4E00;&#x4E2A;log&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7136;&#x540E;load&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x662F;no&#xFF0C;&#x7528;&#x6237;&#x5FC5;&#x987B;&#x624B;&#x52A8;redis-check-aof&#x4FEE;&#x590D;AOF&#x6587;&#x4EF6;&#x624D;&#x53EF;&#x4EE5;&#x3002;</span>
aof-load-truncated yes

<span class="hljs-comment"># &#x5728;&#x91CD;&#x5199;AOF&#x6587;&#x4EF6;&#x65F6;&#xFF0C;Redis&#x80FD;&#x591F;&#x5728;AOF&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;RDB&#x5E8F;&#x8A00;&#xFF0C;&#x4EE5;&#x83B7;&#x5F97;&#x66F4;&#x5FEB;&#x7684;&#x91CD;&#x5199;&#x548C;&#x6062;&#x590D;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x88AB;&#x6253;&#x5F00;&#x65F6;&#xFF0C;&#x91CD;&#x5199;&#x7684;AOF&#x6587;&#x4EF6;&#x7531;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5C0F;&#x8282;&#x7EC4;&#x6210;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   [RDB file][AOF tail]</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x52A0;&#x8F7D;Redis&#x65F6;&#xFF0C;&#x786E;&#x8BA4;AOF&#x6587;&#x4EF6;&#x4EE5;&#x201C;Redis&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x5F00;&#x5934;&#xFF0C;&#x5E76;&#x52A0;&#x8F7D;&#x9884;&#x56FA;&#x5B9A;&#x7684;RDB&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x7EE7;&#x7EED;&#x52A0;&#x8F7D;AOF tail&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x8FD9;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x5173;&#x95ED;&#x7684;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x683C;&#x5F0F;&#x66F4;&#x6539;&#x7684;&#x610F;&#x5916;&#xFF0C;&#x4F46;&#x5728;&#x67D0;&#x4E9B;&#x65F6;&#x5019;&#x4F1A;&#x88AB;&#x7528;&#x4F5C;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</span>
aof-use-rdb-preamble no

<span class="hljs-comment">################################ LUA&#x811A;&#x672C;  ###############################</span>

<span class="hljs-comment"># &#x5982;&#x679C;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x65F6;&#x95F4;&#x9650;&#x5236;&#xFF08;&#x6BEB;&#x79D2;&#xFF09;&#xFF0C;redis&#x4F1A;&#x8BB0;&#x4E2A;log&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;error&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#x8D85;&#x8FC7;&#x4E86;&#x6700;&#x5927;&#x65F6;&#x9650;&#x3002;&#x53EA;&#x6709;SCRIPT KILL&#x548C;SHUTDOWN NOSAVE&#x53EF;&#x4EE5;&#x7528;&#x3002;</span>
<span class="hljs-comment"># &#x7B2C;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x6740;&#x6CA1;&#x6709;&#x8C03;write&#x547D;&#x4EE4;&#x7684;&#x4E1C;&#x897F;&#x3002;&#x8981;&#x662F;&#x5DF2;&#x7ECF;&#x8C03;&#x7528;&#x4E86;write&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x7B2C;&#x4E8C;&#x4E2A;&#x547D;&#x4EE4;&#x6740;&#x3002;</span>
lua-time-limit 5000

<span class="hljs-comment">################################ REDIS &#x96C6;&#x7FA4;  ###############################</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x96C6;&#x7FA4;&#x5F00;&#x5173;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x5F00;&#x542F;&#x96C6;&#x7FA4;&#x6A21;&#x5F0F;&#x3002;</span>
<span class="hljs-comment"># cluster-enabled yes</span>

<span class="hljs-comment"># &#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6301;&#x4E45;&#x5316;&#x4FDD;&#x5B58;&#x96C6;&#x7FA4;&#x7684;&#x4FE1;&#x606F;&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7531;Redis&#x751F;&#x6210;&#x5E76;&#x66F4;&#x65B0;&#xFF0C;</span>
<span class="hljs-comment"># &#x6BCF;&#x4E2A;Redis&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x4E0E;&#x5B9E;&#x4F8B;&#x8FD0;&#x884C;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#x4E0D;&#x51B2;&#x7A81;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-config-file nodes-6379.conf</span>

<span class="hljs-comment"># &#x8282;&#x70B9;&#x4E92;&#x8FDE;&#x8D85;&#x65F6;&#x7684;&#x9600;&#x503C;&#xFF0C;&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x8D85;&#x65F6;&#x6BEB;&#x79D2;&#x6570;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-node-timeout 15000</span>

<span class="hljs-comment"># &#x5728;&#x8FDB;&#x884C;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5168;&#x90E8;slave&#x90FD;&#x4F1A;&#x8BF7;&#x6C42;&#x7533;&#x8BF7;&#x4E3A;master&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;slave&#x53EF;&#x80FD;&#x4E0E;master&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;</span>
<span class="hljs-comment"># &#x5BFC;&#x81F4;&#x6570;&#x636E;&#x8FC7;&#x4E8E;&#x9648;&#x65E7;&#xFF0C;&#x8FD9;&#x6837;&#x7684;slave&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x63D0;&#x5347;&#x4E3A;master&#x3002;&#x8BE5;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x7528;&#x6765;&#x5224;&#x65AD;slave&#x8282;&#x70B9;&#x4E0E;master&#x65AD;&#x7EBF;&#x7684;&#x65F6;&#x95F4;&#x662F;&#x5426;&#x8FC7;&#x957F;&#x3002;</span>
<span class="hljs-comment"># &#x5224;&#x65AD;&#x65B9;&#x6CD5;&#x662F;&#xFF1A;</span>
<span class="hljs-comment">#    &#x6BD4;&#x8F83;slave&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x95F4;&#x548C;(node-timeout * slave-validity-factor) + repl-ping-slave-period</span>
<span class="hljs-comment">#    &#x5982;&#x679C;&#x8282;&#x70B9;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x4E3A;&#x4E09;&#x5341;&#x79D2;, &#x5E76;&#x4E14;slave-validity-factor&#x4E3A;10,</span>
<span class="hljs-comment">#    &#x5047;&#x8BBE;&#x9ED8;&#x8BA4;&#x7684;repl-ping-slave-period&#x662F;10&#x79D2;&#xFF0C;&#x5373;&#x5982;&#x679C;&#x8D85;&#x8FC7;310&#x79D2;slave&#x5C06;&#x4E0D;&#x4F1A;&#x5C1D;&#x8BD5;&#x8FDB;&#x884C;&#x6545;&#x969C;&#x8F6C;&#x79FB;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-slave-validity-factor 10</span>

<span class="hljs-comment"># master&#x7684;slave&#x6570;&#x91CF;&#x5927;&#x4E8E;&#x8BE5;&#x503C;&#xFF0C;slave&#x624D;&#x80FD;&#x8FC1;&#x79FB;&#x5230;&#x5176;&#x4ED6;&#x5B64;&#x7ACB;master&#x4E0A;&#xFF0C;</span>
<span class="hljs-comment"># &#x5982;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x82E5;&#x88AB;&#x8BBE;&#x4E3A;2&#xFF0C;&#x90A3;&#x4E48;&#x53EA;&#x6709;&#x5F53;&#x4E00;&#x4E2A;&#x4E3B;&#x8282;&#x70B9;&#x62E5;&#x6709;2&#x4E2A;&#x53EF;&#x5DE5;&#x4F5C;&#x7684;&#x4ECE;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x5B83;&#x7684;&#x4E00;&#x4E2A;&#x4ECE;&#x8282;&#x70B9;&#x4F1A;&#x5C1D;&#x8BD5;&#x8FC1;&#x79FB;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-migration-barrier 1</span>

<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x96C6;&#x7FA4;&#x5168;&#x90E8;&#x7684;slot&#x6709;&#x8282;&#x70B9;&#x8D1F;&#x8D23;&#xFF0C;&#x96C6;&#x7FA4;&#x72B6;&#x6001;&#x624D;&#x4E3A;ok&#xFF0C;&#x624D;&#x80FD;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</span>
<span class="hljs-comment"># &#x8BBE;&#x7F6E;&#x4E3A;no&#xFF0C;&#x53EF;&#x4EE5;&#x5728;slot&#x6CA1;&#x6709;&#x5168;&#x90E8;&#x5206;&#x914D;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;</span>
<span class="hljs-comment"># &#x4E0D;&#x5EFA;&#x8BAE;&#x6253;&#x5F00;&#x8BE5;&#x914D;&#x7F6E;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x9020;&#x6210;&#x5206;&#x533A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C0F;&#x5206;&#x533A;&#x7684;master&#x4E00;&#x76F4;&#x5728;&#x63A5;&#x53D7;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x800C;&#x9020;&#x6210;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-require-full-coverage yes</span>

<span class="hljs-comment"># This option, when set to yes, prevents slaves from trying to failover its</span>
<span class="hljs-comment"># master during master failures. However the master can still perform a</span>
<span class="hljs-comment"># manual failover, if forced to do so.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This is useful in different scenarios, especially in the case of multiple</span>
<span class="hljs-comment"># data center operations, where we want one side to never be promoted if not</span>
<span class="hljs-comment"># in the case of a total DC failure.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-slave-no-failover no</span>

<span class="hljs-comment"># In order to setup your cluster make sure to read the documentation</span>
<span class="hljs-comment"># available at http://redis.io web site.</span>

<span class="hljs-comment">########################## &#x96C6;&#x7FA4;DOCKER/NAT&#x652F;&#x6301;  ########################</span>

<span class="hljs-comment"># &#x5728;&#x67D0;&#x4E9B;&#x90E8;&#x7F72;&#x4E2D;&#xFF0C;Redis&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x5730;&#x5740;&#x53D1;&#x73B0;&#x5931;&#x8D25;&#xFF0C;&#x56E0;&#x4E3A;&#x5730;&#x5740;&#x662F;NAT-ted&#xFF0C;&#x6216;&#x8005;&#x56E0;&#x4E3A;&#x7AEF;&#x53E3;&#x88AB;&#x8F6C;&#x53D1;&#xFF08;&#x5178;&#x578B;&#x7684;&#x4F8B;&#x5B50;&#x662F;Docker&#x548C;&#x5176;&#x4ED6;&#x5BB9;&#x5668;&#xFF09;</span>
<span class="hljs-comment"># &#x4E3A;&#x4E86;&#x4F7F;Redis&#x96C6;&#x7FA4;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x73AF;&#x5883;&#x4E2D;&#x5DE5;&#x4F5C;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x914D;&#x7F6E;&#xFF0C;&#x5176;&#x4E2D;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x516C;&#x5171;&#x5730;&#x5740;&#x3002;&#x4E0B;&#x9762;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#x7528;&#x4E8E;&#x8FD9;&#x4E2A;&#x8303;&#x56F4;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#xFF1A;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># * cluster-announce-ip</span>
<span class="hljs-comment"># * cluster-announce-port</span>
<span class="hljs-comment"># * cluster-announce-bus-port</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># &#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x6307;&#x793A;&#x8282;&#x70B9;&#x5173;&#x4E8E;&#x5176;&#x5730;&#x5740;&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x7AEF;&#x53E3;&#x548C;&#x96C6;&#x7FA4;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7AEF;&#x53E3;&#x3002;</span>
<span class="hljs-comment"># &#x7136;&#x540E;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5C06;&#x5728;&#x603B;&#x7EBF;&#x6570;&#x636E;&#x5305;&#x7684;&#x5934;&#x90E8;&#x4E2D;&#x53D1;&#x5E03;&#xFF0C;&#x8FD9;&#x6837;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x5C31;&#x80FD;&#x591F;&#x6B63;&#x786E;&#x5730;&#x6620;&#x5C04;&#x51FA;&#x53D1;&#x5E03;&#x4FE1;&#x606F;&#x7684;&#x8282;&#x70B9;&#x7684;&#x5730;&#x5740;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;&#x4E0A;&#x8FF0;&#x9009;&#x9879;&#xFF0C;&#x5219;&#x5C06;&#x4F7F;&#x7528;&#x5E38;&#x89C4;&#x7684;Redis&#x96C6;&#x7FA4;&#x81EA;&#x52A8;&#x68C0;&#x6D4B;&#x3002;</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x65F6;&#xFF0C;&#x603B;&#x7EBF;&#x7AEF;&#x53E3;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x5904;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x7AEF;&#x53E3;+10000&#x7684;&#x56FA;&#x5B9A;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5B83;&#x4EEC;&#x7684;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x6765;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x7AEF;&#x53E3;&#x548C;&#x603B;&#x7EBF;&#x7AEF;&#x53E3;&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x516C;&#x5171;&#x7AEF;&#x53E3;&#xFF0C;&#x5219;&#x901A;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;1&#x4E07;&#x7684;&#x56FA;&#x5B9A;&#x504F;&#x79FB;&#x91CF;&#x3002;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Example:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-announce-ip 10.1.1.5</span>
<span class="hljs-comment"># cluster-announce-port 6379</span>
<span class="hljs-comment"># cluster-announce-bus-port 6380</span>

<span class="hljs-comment">################################## &#x6162;&#x65E5;&#x5FD7; ###################################</span>

<span class="hljs-comment"># slog log&#x662F;&#x7528;&#x6765;&#x8BB0;&#x5F55;redis&#x8FD0;&#x884C;&#x4E2D;&#x6267;&#x884C;&#x6BD4;&#x8F83;&#x6162;&#x7684;&#x547D;&#x4EE4;&#x8017;&#x65F6;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x8D85;&#x8FC7;&#x4E86;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#xFF0C;&#x5C31;&#x8BB0;&#x5F55;&#x5728;slow log&#x4E2D;&#xFF0C;slog log&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;IO&#x64CD;&#x4F5C;&#x3002;</span>
<span class="hljs-comment"># &#x6267;&#x884C;&#x65F6;&#x95F4;&#x6BD4;slowlog-log-slower-than&#x5927;&#x7684;&#x8BF7;&#x6C42;&#x8BB0;&#x5F55;&#x5230;slowlog&#x91CC;&#x9762;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x5FAE;&#x79D2;&#xFF0C;&#x6240;&#x4EE5;1000000&#x5C31;&#x662F;1&#x79D2;&#x3002;</span>
<span class="hljs-comment"># &#x6CE8;&#x610F;&#xFF0C;&#x8D1F;&#x6570;&#x65F6;&#x95F4;&#x4F1A;&#x7981;&#x7528;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#xFF0C;&#x800C;0&#x5219;&#x4F1A;&#x5F3A;&#x5236;&#x8BB0;&#x5F55;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x3002;</span>
slowlog-log-slower-than 10000

<span class="hljs-comment"># &#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x957F;&#x5EA6;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x547D;&#x4EE4;&#x88AB;&#x5199;&#x8FDB;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6700;&#x8001;&#x7684;&#x90A3;&#x4E2A;&#x8BB0;&#x5F55;&#x4F1A;&#x88AB;&#x5220;&#x6389;&#x3002;&#x8FD9;&#x4E2A;&#x957F;&#x5EA6;&#x6CA1;&#x6709;&#x9650;&#x5236;&#x3002;&#x53EA;&#x8981;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x5185;&#x5B58;&#x5C31;&#x884C;&#x3002;</span>
<span class="hljs-comment"># &#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; SLOWLOG RESET &#x6765;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;</span>
slowlog-max-len 128

<span class="hljs-comment">################################ &#x5EF6;&#x8FDF;&#x76D1;&#x63A7; ##############################</span>

<span class="hljs-comment"># &#x5EF6;&#x8FDF;&#x76D1;&#x63A7;&#x529F;&#x80FD;&#x662F;&#x7528;&#x6765;&#x76D1;&#x63A7;redis&#x4E2D;&#x6267;&#x884C;&#x6BD4;&#x8F83;&#x7F13;&#x6162;&#x7684;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x7528;LATENCY&#x6253;&#x5370;redis&#x5B9E;&#x4F8B;&#x5728;&#x8DD1;&#x547D;&#x4EE4;&#x65F6;&#x7684;&#x8017;&#x65F6;&#x56FE;&#x8868;&#x3002;</span>
<span class="hljs-comment"># &#x53EA;&#x8BB0;&#x5F55;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x4E0B;&#x8FB9;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x7684;&#x64CD;&#x4F5C;&#x3002;0&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x662F;&#x5173;&#x95ED;&#x76D1;&#x89C6;&#x3002;</span>
<span class="hljs-comment"># &#x9ED8;&#x8BA4;&#x5EF6;&#x8FDF;&#x76D1;&#x63A7;&#x529F;&#x80FD;&#x662F;&#x5173;&#x95ED;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x6253;&#x5F00;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;CONFIG SET&#x547D;&#x4EE4;&#x52A8;&#x6001;&#x8BBE;&#x7F6E;&#x3002;</span>
latency-monitor-threshold 0

<span class="hljs-comment">############################# &#x4E8B;&#x4EF6;&#x901A;&#x77E5; ##############################</span>

<span class="hljs-comment"># &#x952E;&#x7A7A;&#x95F4;&#x901A;&#x77E5;&#x4F7F;&#x5F97;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BA2;&#x9605;&#x9891;&#x9053;&#x6216;&#x6A21;&#x5F0F;&#xFF0C;&#x6765;&#x63A5;&#x6536;&#x90A3;&#x4E9B;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x6539;&#x52A8;&#x4E86; Redis &#x6570;&#x636E;&#x96C6;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</span>
<span class="hljs-comment"># &#x56E0;&#x4E3A;&#x5F00;&#x542F;&#x952E;&#x7A7A;&#x95F4;&#x901A;&#x77E5;&#x529F;&#x80FD;&#x9700;&#x8981;&#x6D88;&#x8017;&#x4E00;&#x4E9B; CPU &#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x4E0B;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x5904;&#x4E8E;&#x5173;&#x95ED;&#x72B6;&#x6001;&#x3002;</span>
<span class="hljs-comment"># notify-keyspace-events &#x7684;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4EE5;&#x4E0B;&#x5B57;&#x7B26;&#x7684;&#x4EFB;&#x610F;&#x7EC4;&#x5408;&#xFF0C;&#x5B83;&#x6307;&#x5B9A;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x8BE5;&#x53D1;&#x9001;&#x54EA;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x901A;&#x77E5;&#xFF1A;</span>
<span class="hljs-comment">#   K &#x952E;&#x7A7A;&#x95F4;&#x901A;&#x77E5;&#xFF0C;&#x6240;&#x6709;&#x901A;&#x77E5;&#x4EE5; __keyspace@__ &#x4E3A;&#x524D;&#x7F00;</span>
<span class="hljs-comment">#   E &#x952E;&#x4E8B;&#x4EF6;&#x901A;&#x77E5;&#xFF0C;&#x6240;&#x6709;&#x901A;&#x77E5;&#x4EE5; __keyevent@__ &#x4E3A;&#x524D;&#x7F00;</span>
<span class="hljs-comment">#   g DEL &#x3001; EXPIRE &#x3001; RENAME &#x7B49;&#x7C7B;&#x578B;&#x65E0;&#x5173;&#x7684;&#x901A;&#x7528;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">#   $ &#x5B57;&#x7B26;&#x4E32;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">#   l &#x5217;&#x8868;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">#   s &#x96C6;&#x5408;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">#   h &#x54C8;&#x5E0C;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">#   z &#x6709;&#x5E8F;&#x96C6;&#x5408;&#x547D;&#x4EE4;&#x7684;&#x901A;&#x77E5;</span>
<span class="hljs-comment">#   x &#x8FC7;&#x671F;&#x4E8B;&#x4EF6;&#xFF1A;&#x6BCF;&#x5F53;&#x6709;&#x8FC7;&#x671F;&#x952E;&#x88AB;&#x5220;&#x9664;&#x65F6;&#x53D1;&#x9001;</span>
<span class="hljs-comment">#   e &#x9A71;&#x9010;(evict)&#x4E8B;&#x4EF6;&#xFF1A;&#x6BCF;&#x5F53;&#x6709;&#x952E;&#x56E0;&#x4E3A; maxmemory &#x653F;&#x7B56;&#x800C;&#x88AB;&#x5220;&#x9664;&#x65F6;&#x53D1;&#x9001;</span>
<span class="hljs-comment">#   A &#x53C2;&#x6570; g$lshzxe &#x7684;&#x522B;&#x540D;</span>
<span class="hljs-comment"># &#x8F93;&#x5165;&#x7684;&#x53C2;&#x6570;&#x4E2D;&#x81F3;&#x5C11;&#x8981;&#x6709;&#x4E00;&#x4E2A; K &#x6216;&#x8005; E&#xFF0C;&#x5426;&#x5219;&#x7684;&#x8BDD;&#xFF0C;&#x4E0D;&#x7BA1;&#x5176;&#x4F59;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x90FD;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55; &#x901A;&#x77E5;&#x88AB;&#x5206;&#x53D1;&#x3002;</span>
notify-keyspace-events <span class="hljs-string">&quot;&quot;</span>

<span class="hljs-comment">############################### &#x9AD8;&#x7EA7;&#x914D;&#x7F6E; ###############################</span>

<span class="hljs-comment"># hash&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5728;&#x7F16;&#x7801;&#x4E0A;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ziplist&#x548C;hashtable&#x3002;</span>
<span class="hljs-comment"># ziplist&#x7684;&#x7279;&#x70B9;&#x5C31;&#x662F;&#x6587;&#x4EF6;&#x5B58;&#x50A8;(&#x4EE5;&#x53CA;&#x5185;&#x5B58;&#x5B58;&#x50A8;)&#x6240;&#x9700;&#x7684;&#x7A7A;&#x95F4;&#x8F83;&#x5C0F;,&#x5728;&#x5185;&#x5BB9;&#x8F83;&#x5C0F;&#x65F6;,&#x6027;&#x80FD;&#x548C;hashtable&#x51E0;&#x4E4E;&#x4E00;&#x6837;&#x3002;</span>
<span class="hljs-comment"># &#x56E0;&#x6B64;redis&#x5BF9;hash&#x7C7B;&#x578B;&#x9ED8;&#x8BA4;&#x91C7;&#x53D6;ziplist&#x3002;&#x5982;&#x679C;hash&#x4E2D;&#x6761;&#x76EE;&#x7684;&#x6761;&#x76EE;&#x4E2A;&#x6570;&#x6216;&#x8005;value&#x957F;&#x5EA6;&#x8FBE;&#x5230;&#x9600;&#x503C;,&#x5C06;&#x4F1A;&#x88AB;&#x91CD;&#x6784;&#x4E3A;hashtable&#x3002;</span>
<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6307;&#x7684;&#x662F;ziplist&#x4E2D;&#x5141;&#x8BB8;&#x5B58;&#x50A8;&#x7684;&#x6700;&#x5927;&#x6761;&#x76EE;&#x4E2A;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;512&#xFF0C;&#x5EFA;&#x8BAE;&#x4E3A;128</span>
<span class="hljs-built_in">hash</span>-max-ziplist-entries 512

<span class="hljs-comment"># ziplist&#x4E2D;&#x5141;&#x8BB8;&#x6761;&#x76EE;value&#x503C;&#x6700;&#x5927;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;64&#xFF0C;&#x5EFA;&#x8BAE;&#x4E3A;1024</span>
<span class="hljs-built_in">hash</span>-max-ziplist-value 64

<span class="hljs-comment"># &#x5F53;&#x53D6;&#x6B63;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8868;&#x793A;&#x6309;&#x7167;&#x6570;&#x636E;&#x9879;&#x4E2A;&#x6570;&#x6765;&#x9650;&#x5B9A;&#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#x957F;&#x5EA6;&#x3002;</span>
<span class="hljs-comment"># &#x6BD4;&#x5982;&#xFF0C;&#x5F53;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x6210;5&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8868;&#x793A;&#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x7684;ziplist&#x6700;&#x591A;&#x5305;&#x542B;5&#x4E2A;&#x6570;&#x636E;&#x9879;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x53D6;&#x8D1F;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8868;&#x793A;&#x6309;&#x7167;&#x5360;&#x7528;&#x5B57;&#x8282;&#x6570;&#x6765;&#x9650;&#x5B9A;&#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#x957F;&#x5EA6;&#x3002;&#x8FD9;&#x65F6;&#xFF0C;&#x5B83;&#x53EA;&#x80FD;&#x53D6;-1&#x5230;-5&#x8FD9;&#x4E94;&#x4E2A;&#x503C;&#xFF0C;&#x6BCF;&#x4E2A;&#x503C;&#x542B;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</span>
<span class="hljs-comment">#     -5: &#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#x5927;&#x5C0F;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7; 64Kb&#x3002;&#xFF08;&#x6CE8;&#xFF1A;1kb =&gt; 1024 bytes&#xFF09;</span>
<span class="hljs-comment">#     -4: &#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#x5927;&#x5C0F;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7; 32Kb&#x3002;</span>
<span class="hljs-comment">#     -3: &#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#x5927;&#x5C0F;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7; 16Kb&#x3002;</span>
<span class="hljs-comment">#     -2: &#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#x5927;&#x5C0F;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7; 8Kb&#x3002;&#xFF08;-2&#x662F;Redis&#x7ED9;&#x51FA;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;</span>
<span class="hljs-comment">#     -1: &#x6BCF;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#x5927;&#x5C0F;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7; 4Kb&#x3002;</span>
list-max-ziplist-size -2

<span class="hljs-comment"># &#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x8868;&#x793A;&#x4E00;&#x4E2A;quicklist&#x4E24;&#x7AEF;&#x4E0D;&#x88AB;&#x538B;&#x7F29;&#x7684;&#x8282;&#x70B9;&#x4E2A;&#x6570;&#x3002;</span>
<span class="hljs-comment"># &#x6CE8;&#xFF1A;&#x8FD9;&#x91CC;&#x7684;&#x8282;&#x70B9;&#x4E2A;&#x6570;&#x662F;&#x6307;quicklist&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x8282;&#x70B9;&#x4E2A;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6307;ziplist&#x91CC;&#x9762;&#x7684;&#x6570;&#x636E;&#x9879;&#x4E2A;&#x6570;&#x3002;</span>
<span class="hljs-comment"># &#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x4E00;&#x4E2A;quicklist&#x8282;&#x70B9;&#x4E0A;&#x7684;ziplist&#xFF0C;&#x5982;&#x679C;&#x88AB;&#x538B;&#x7F29;&#xFF0C;&#x5C31;&#x662F;&#x6574;&#x4F53;&#x88AB;&#x538B;&#x7F29;&#x7684;&#x3002;</span>
<span class="hljs-comment"># &#x53C2;&#x6570;list-compress-depth&#x7684;&#x53D6;&#x503C;&#x542B;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</span>
<span class="hljs-comment">#     0: &#x662F;&#x4E2A;&#x7279;&#x6B8A;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x90FD;&#x4E0D;&#x538B;&#x7F29;&#x3002;&#x8FD9;&#x662F;Redis&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</span>
<span class="hljs-comment">#     1: &#x8868;&#x793A;quicklist&#x4E24;&#x7AEF;&#x5404;&#x6709;1&#x4E2A;&#x8282;&#x70B9;&#x4E0D;&#x538B;&#x7F29;&#xFF0C;&#x4E2D;&#x95F4;&#x7684;&#x8282;&#x70B9;&#x538B;&#x7F29;&#x3002;</span>
<span class="hljs-comment">#     2: &#x8868;&#x793A;quicklist&#x4E24;&#x7AEF;&#x5404;&#x6709;2&#x4E2A;&#x8282;&#x70B9;&#x4E0D;&#x538B;&#x7F29;&#xFF0C;&#x4E2D;&#x95F4;&#x7684;&#x8282;&#x70B9;&#x538B;&#x7F29;&#x3002;</span>
<span class="hljs-comment">#     3: &#x8868;&#x793A;quicklist&#x4E24;&#x7AEF;&#x5404;&#x6709;3&#x4E2A;&#x8282;&#x70B9;&#x4E0D;&#x538B;&#x7F29;&#xFF0C;&#x4E2D;&#x95F4;&#x7684;&#x8282;&#x70B9;&#x538B;&#x7F29;&#x3002;</span>
<span class="hljs-comment">#     &#x4F9D;&#x6B64;&#x7C7B;&#x63A8;&#x2026;</span>
<span class="hljs-comment"># &#x7531;&#x4E8E;0&#x662F;&#x4E2A;&#x7279;&#x6B8A;&#x503C;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x770B;&#x51FA;quicklist&#x7684;&#x5934;&#x8282;&#x70B9;&#x548C;&#x5C3E;&#x8282;&#x70B9;&#x603B;&#x662F;&#x4E0D;&#x88AB;&#x538B;&#x7F29;&#x7684;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E8E;&#x5728;&#x8868;&#x7684;&#x4E24;&#x7AEF;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x5B58;&#x53D6;&#x3002;</span>
list-compress-depth 0

<span class="hljs-comment"># &#x6570;&#x636E;&#x91CF;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;set-max-intset-entries&#x7528;intset&#xFF0C;&#x5927;&#x4E8E;set-max-intset-entries&#x7528;set</span>
<span class="hljs-built_in">set</span>-max-intset-entries 512

<span class="hljs-comment"># &#x6570;&#x636E;&#x91CF;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;zset-max-ziplist-entries&#x7528;ziplist&#xFF0C;&#x5927;&#x4E8E;zset-max-ziplist-entries&#x7528;zset</span>
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

<span class="hljs-comment"># value&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;hll-sparse-max-bytes&#x4F7F;&#x7528;&#x7A00;&#x758F;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF08;sparse&#xFF09;</span>
<span class="hljs-comment"># &#x5927;&#x4E8E;hll-sparse-max-bytes&#x4F7F;&#x7528;&#x7A20;&#x5BC6;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF08;dense&#xFF09;&#xFF0C;&#x4E00;&#x4E2A;&#x6BD4;16000&#x5927;&#x7684;value&#x662F;&#x51E0;&#x4E4E;&#x6CA1;&#x7528;&#x7684;&#xFF0C;</span>
  &#x5EFA;&#x8BAE;&#x7684;value&#x5927;&#x6982;&#x4E3A;3000&#x3002;&#x5982;&#x679C;&#x5BF9;CPU&#x8981;&#x6C42;&#x4E0D;&#x9AD8;&#xFF0C;&#x5BF9;&#x7A7A;&#x95F4;&#x8981;&#x6C42;&#x8F83;&#x9AD8;&#x7684;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x5230;10000&#x5DE6;&#x53F3;
hll-sparse-max-bytes 3000

<span class="hljs-comment"># Redis&#x5C06;&#x5728;&#x6BCF;100&#x6BEB;&#x79D2;&#x65F6;&#x4F7F;&#x7528;1&#x6BEB;&#x79D2;&#x7684;CPU&#x65F6;&#x95F4;&#x6765;&#x5BF9;redis&#x7684;hash&#x8868;&#x8FDB;&#x884C;&#x91CD;&#x65B0;hash&#xFF0C;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x3002;</span>
<span class="hljs-comment"># &#x5F53;&#x4F60;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x6709;&#x975E;&#x5E38;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x9700;&#x8981;&#xFF0C;&#x4E0D;&#x80FD;&#x591F;&#x63A5;&#x53D7;Redis&#x65F6;&#x4E0D;&#x65F6;&#x7684;&#x5BF9;&#x8BF7;&#x6C42;&#x6709;2&#x6BEB;&#x79D2;&#x7684;&#x5EF6;&#x8FDF;&#x7684;&#x8BDD;&#xFF0C;&#x628A;&#x8FD9;&#x9879;&#x914D;&#x7F6E;&#x4E3A;no&#x3002;</span>
<span class="hljs-comment"># &#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x5C3D;&#x53EF;&#x80FD;&#x5FEB;&#x7684;&#x91CA;&#x653E;&#x5185;&#x5B58;</span>
activerehashing yes

<span class="hljs-comment"># &#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x8FDB;&#x884C;&#x9650;&#x5236;&#x53EF;&#x4EE5;&#x5F3A;&#x8FEB;&#x90A3;&#x4E9B;&#x4E0D;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;&#x7528;&#x6765;&#x5F3A;&#x5236;&#x5173;&#x95ED;&#x4F20;&#x8F93;&#x7F13;&#x6162;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span>
<span class="hljs-comment"># &#x5BF9;&#x4E8E;normal client&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;0&#x8868;&#x793A;&#x53D6;&#x6D88;hard limit&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;0&#x548C;&#x7B2C;&#x4E09;&#x4E2A;0&#x8868;&#x793A;&#x53D6;&#x6D88;soft limit&#xFF0C;</span>
<span class="hljs-comment"># normal client&#x9ED8;&#x8BA4;&#x53D6;&#x6D88;&#x9650;&#x5236;&#xFF0C;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5BFB;&#x95EE;&#xFF0C;&#x4ED6;&#x4EEC;&#x662F;&#x4E0D;&#x4F1A;&#x63A5;&#x6536;&#x6570;&#x636E;&#x7684;</span>
client-output-buffer-limit normal 0 0 0

<span class="hljs-comment"># &#x5BF9;&#x4E8E;slave client&#x548C;MONITER client&#xFF0C;&#x5982;&#x679C;client-output-buffer&#x4E00;&#x65E6;&#x8D85;&#x8FC7;256mb&#xFF0C;</span>
<span class="hljs-comment"># &#x53C8;&#x6216;&#x8005;&#x8D85;&#x8FC7;64mb&#x6301;&#x7EED;60&#x79D2;&#xFF0C;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4F1A;&#x7ACB;&#x5373;&#x65AD;&#x5F00;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span>
client-output-buffer-limit slave 256mb 64mb 60

<span class="hljs-comment"># &#x5BF9;&#x4E8E;pubsub client&#xFF0C;&#x5982;&#x679C;client-output-buffer&#x4E00;&#x65E6;&#x8D85;&#x8FC7;32mb&#xFF0C;</span>
<span class="hljs-comment"># &#x53C8;&#x6216;&#x8005;&#x8D85;&#x8FC7;8mb&#x6301;&#x7EED;60&#x79D2;&#xFF0C;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4F1A;&#x7ACB;&#x5373;&#x65AD;&#x5F00;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span>
client-output-buffer-limit pubsub 32mb 8mb 60

<span class="hljs-comment"># Client query buffers accumulate new commands. They are limited to a fixed</span>
<span class="hljs-comment"># amount by default in order to avoid that a protocol desynchronization (for</span>
<span class="hljs-comment"># instance due to a bug in the client) will lead to unbound memory usage in</span>
<span class="hljs-comment"># the query buffer. However you can configure it here if you have very special</span>
<span class="hljs-comment"># needs, such us huge multi/exec requests or alike.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># client-query-buffer-limit 1gb</span>

<span class="hljs-comment"># In the Redis protocol, bulk requests, that are, elements representing single</span>
<span class="hljs-comment"># strings, are normally limited ot 512 mb. However you can change this limit</span>
<span class="hljs-comment"># here.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># proto-max-bulk-len 512mb</span>

<span class="hljs-comment"># redis&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x7684;&#x9891;&#x7387;&#x4E3A;1s&#x9664;&#x4EE5;hz&#x3002;</span>
hz 10

<span class="hljs-comment"># &#x5728;aof&#x91CD;&#x5199;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x6253;&#x5F00;&#x4E86;aof-rewrite-incremental-fsync&#x5F00;&#x5173;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x6BCF;32MB&#x6267;&#x884C;&#x4E00;&#x6B21;fsync&#x3002;&#x8FD9;</span>
<span class="hljs-comment"># &#x5BF9;&#x4E8E;&#x628A;&#x6587;&#x4EF6;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x662F;&#x6709;&#x5E2E;&#x52A9;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x8FC7;&#x5927;&#x7684;&#x5EF6;&#x8FDF;&#x5CF0;&#x503C;&#x3002;</span>
aof-rewrite-incremental-fsync yes

<span class="hljs-comment"># Redis LFU eviction (see maxmemory setting) can be tuned. However it is a good</span>
<span class="hljs-comment"># idea to start with the default settings and only change them after investigating</span>
<span class="hljs-comment"># how to improve the performances and how the keys LFU change over time, which</span>
<span class="hljs-comment"># is possible to inspect via the OBJECT FREQ command.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># There are two tunable parameters in the Redis LFU implementation: the</span>
<span class="hljs-comment"># counter logarithm factor and the counter decay time. It is important to</span>
<span class="hljs-comment"># understand what the two parameters mean before changing them.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The LFU counter is just 8 bits per key, it&apos;s maximum value is 255, so Redis</span>
<span class="hljs-comment"># uses a probabilistic increment with logarithmic behavior. Given the value</span>
<span class="hljs-comment"># of the old counter, when a key is accessed, the counter is incremented in</span>
<span class="hljs-comment"># this way:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1. A random number R between 0 and 1 is extracted.</span>
<span class="hljs-comment"># 2. A probability P is calculated as 1/(old_value*lfu_log_factor+1).</span>
<span class="hljs-comment"># 3. The counter is incremented only if R &lt; P.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default lfu-log-factor is 10. This is a table of how the frequency</span>
<span class="hljs-comment"># counter changes with a different number of accesses with different</span>
<span class="hljs-comment"># logarithmic factors:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | factor | 100 hits   | 1000 hits  | 100K hits  | 1M hits    | 10M hits   |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 0      | 104        | 255        | 255        | 255        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 1      | 18         | 49         | 255        | 255        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 10     | 10         | 18         | 142        | 255        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 100    | 8          | 11         | 49         | 143        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> The above table was obtained by running the following commands:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   redis-benchmark -n 1000000 incr foo</span>
<span class="hljs-comment">#   redis-cli object freq foo</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># NOTE 2: The counter initial value is 5 in order to give new objects a chance</span>
<span class="hljs-comment"># to accumulate hits.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The counter decay time is the time, in minutes, that must elapse in order</span>
<span class="hljs-comment"># for the key counter to be divided by two (or decremented if it has a value</span>
<span class="hljs-comment"># less &lt;= 10).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default value for the lfu-decay-time is 1. A Special value of 0 means to</span>
<span class="hljs-comment"># decay the counter every time it happens to be scanned.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># lfu-log-factor 10</span>
<span class="hljs-comment"># lfu-decay-time 1</span>

<span class="hljs-comment">########################### ACTIVE DEFRAGMENTATION #######################</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># WARNING THIS FEATURE IS EXPERIMENTAL. However it was stress tested</span>
<span class="hljs-comment"># even in production and manually tested by multiple engineers for some</span>
<span class="hljs-comment"># time.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># What is active defragmentation?</span>
<span class="hljs-comment"># -------------------------------</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Active (online) defragmentation allows a Redis server to compact the</span>
<span class="hljs-comment"># spaces left between small allocations and deallocations of data in memory,</span>
<span class="hljs-comment"># thus allowing to reclaim back memory.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Fragmentation is a natural process that happens with every allocator (but</span>
<span class="hljs-comment"># less so with Jemalloc, fortunately) and certain workloads. Normally a server</span>
<span class="hljs-comment"># restart is needed in order to lower the fragmentation, or at least to flush</span>
<span class="hljs-comment"># away all the data and create it again. However thanks to this feature</span>
<span class="hljs-comment"># implemented by Oran Agra for Redis 4.0 this process can happen at runtime</span>
<span class="hljs-comment"># in an &quot;hot&quot; way, while the server is running.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Basically when the fragmentation is over a certain level (see the</span>
<span class="hljs-comment"># configuration options below) Redis will start to create new copies of the</span>
<span class="hljs-comment"># values in contiguous memory regions by exploiting certain specific Jemalloc</span>
<span class="hljs-comment"># features (in order to understand if an allocation is causing fragmentation</span>
<span class="hljs-comment"># and to allocate it in a better place), and at the same time, will release the</span>
<span class="hljs-comment"># old copies of the data. This process, repeated incrementally for all the keys</span>
<span class="hljs-comment"># will cause the fragmentation to drop back to normal values.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Important things to understand:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1. This feature is disabled by default, and only works if you compiled Redis</span>
<span class="hljs-comment">#    to use the copy of Jemalloc we ship with the source code of Redis.</span>
<span class="hljs-comment">#    This is the default with Linux builds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 2. You never need to enable this feature if you don&apos;t have fragmentation</span>
<span class="hljs-comment">#    issues.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 3. Once you experience fragmentation, you can enable this feature when</span>
<span class="hljs-comment">#    needed with the command &quot;CONFIG SET activedefrag yes&quot;.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The configuration parameters are able to fine tune the behavior of the</span>
<span class="hljs-comment"># defragmentation process. If you are not sure about what they mean it is</span>
<span class="hljs-comment"># a good idea to leave the defaults untouched.</span>

<span class="hljs-comment"># Enabled active defragmentation</span>
<span class="hljs-comment"># activedefrag yes</span>

<span class="hljs-comment"># Minimum amount of fragmentation waste to start active defrag</span>
<span class="hljs-comment"># active-defrag-ignore-bytes 100mb</span>

<span class="hljs-comment"># Minimum percentage of fragmentation to start active defrag</span>
<span class="hljs-comment"># active-defrag-threshold-lower 10</span>

<span class="hljs-comment"># Maximum percentage of fragmentation at which we use maximum effort</span>
<span class="hljs-comment"># active-defrag-threshold-upper 100</span>

<span class="hljs-comment"># Minimal effort for defrag in CPU percentage</span>
<span class="hljs-comment"># active-defrag-cycle-min 25</span>

<span class="hljs-comment"># Maximal effort for defrag in CPU percentage</span>
<span class="hljs-comment"># active-defrag-cycle-max 75</span>
</code></pre>
<h2 id="&#x539F;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a name="&#x539F;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#&#x539F;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>2. &#x539F;&#x7248;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h2>
<p>&#x57FA;&#x4E8E;&#x5355;&#x673A;&#x90E8;&#x7F72;&#x63D0;&#x53D6;&#x7684;&#x539F;&#x59CB;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F5C;&#x4E3A;&#x5907;&#x4EFD;&#x3002;</p>
<pre class="language-"><code class="lang-sh"><span class="hljs-comment">## Generated by install_server.sh ##</span>
<span class="hljs-comment"># Redis configuration file example.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Note that in order to read the configuration file, Redis must be</span>
<span class="hljs-comment"># started with the file path as first argument:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># ./redis-server /path/to/redis.conf</span>

<span class="hljs-comment"># Note on units: when memory size is needed, it is possible to specify</span>
<span class="hljs-comment"># it in the usual form of 1k 5GB 4M and so forth:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1k =&gt; 1000 bytes</span>
<span class="hljs-comment"># 1kb =&gt; 1024 bytes</span>
<span class="hljs-comment"># 1m =&gt; 1000000 bytes</span>
<span class="hljs-comment"># 1mb =&gt; 1024*1024 bytes</span>
<span class="hljs-comment"># 1g =&gt; 1000000000 bytes</span>
<span class="hljs-comment"># 1gb =&gt; 1024*1024*1024 bytes</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># units are case insensitive so 1GB 1Gb 1gB are all the same.</span>

<span class="hljs-comment">################################## INCLUDES ###################################</span>

<span class="hljs-comment"># Include one or more other config files here.  This is useful if you</span>
<span class="hljs-comment"># have a standard template that goes to all Redis servers but also need</span>
<span class="hljs-comment"># to customize a few per-server settings.  Include files can include</span>
<span class="hljs-comment"># other files, so use this wisely.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Notice option &quot;include&quot; won&apos;t be rewritten by command &quot;CONFIG REWRITE&quot;</span>
<span class="hljs-comment"># from admin or Redis Sentinel. Since Redis always uses the last processed</span>
<span class="hljs-comment"># line as value of a configuration directive, you&apos;d better put includes</span>
<span class="hljs-comment"># at the beginning of this file to avoid overwriting config change at runtime.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If instead you are interested in using includes to override configuration</span>
<span class="hljs-comment"># options, it is better to use include as the last line.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># include /path/to/local.conf</span>
<span class="hljs-comment"># include /path/to/other.conf</span>

<span class="hljs-comment">################################## MODULES #####################################</span>

<span class="hljs-comment"># Load modules at startup. If the server is not able to load modules</span>
<span class="hljs-comment"># it will abort. It is possible to use multiple loadmodule directives.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># loadmodule /path/to/my_module.so</span>
<span class="hljs-comment"># loadmodule /path/to/other_module.so</span>

<span class="hljs-comment">################################## NETWORK #####################################</span>

<span class="hljs-comment"># By default, if no &quot;bind&quot; configuration directive is specified, Redis listens</span>
<span class="hljs-comment"># for connections from all the network interfaces available on the server.</span>
<span class="hljs-comment"># It is possible to listen to just one or multiple selected interfaces using</span>
<span class="hljs-comment"># the &quot;bind&quot; configuration directive, followed by one or more IP addresses.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Examples:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># bind 192.168.1.100 10.0.0.1</span>
<span class="hljs-comment"># bind 172.20.32.125 ::1</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the</span>
<span class="hljs-comment"># internet, binding to all the interfaces is dangerous and will expose the</span>
<span class="hljs-comment"># instance to everybody on the internet. So by default we uncomment the</span>
<span class="hljs-comment"># following bind directive, that will force Redis to listen only into</span>
<span class="hljs-comment"># the IPv4 lookback interface address (this means Redis will be able to</span>
<span class="hljs-comment"># accept connections only from clients running into the same computer it</span>
<span class="hljs-comment"># is running).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</span>
<span class="hljs-comment"># JUST COMMENT THE FOLLOWING LINE.</span>
<span class="hljs-comment"># ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="hljs-built_in">bind</span> 127.0.0.1 172.20.32.125

<span class="hljs-comment"># Protected mode is a layer of security protection, in order to avoid that</span>
<span class="hljs-comment"># Redis instances left open on the internet are accessed and exploited.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># When protected mode is on and if:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) The server is not binding explicitly to a set of addresses using the</span>
<span class="hljs-comment">#    &quot;bind&quot; directive.</span>
<span class="hljs-comment"># 2) No password is configured.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The server only accepts connections from clients connecting from the</span>
<span class="hljs-comment"># IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</span>
<span class="hljs-comment"># sockets.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default protected mode is enabled. You should disable it only if</span>
<span class="hljs-comment"># you are sure you want clients from other hosts to connect to Redis</span>
<span class="hljs-comment"># even if no authentication is configured, nor a specific set of interfaces</span>
<span class="hljs-comment"># are explicitly listed using the &quot;bind&quot; directive.</span>
protected-mode no

<span class="hljs-comment"># Accept connections on the specified port, default is 6379 (IANA #815344).</span>
<span class="hljs-comment"># If port 0 is specified Redis will not listen on a TCP socket.</span>
port 6379

<span class="hljs-comment"># TCP listen() backlog.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># In high requests-per-second environments you need an high backlog in order</span>
<span class="hljs-comment"># to avoid slow clients connections issues. Note that the Linux kernel</span>
<span class="hljs-comment"># will silently truncate it to the value of /proc/sys/net/core/somaxconn so</span>
<span class="hljs-comment"># make sure to raise both the value of somaxconn and tcp_max_syn_backlog</span>
<span class="hljs-comment"># in order to get the desired effect.</span>
tcp-backlog 511

<span class="hljs-comment"># Unix socket.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Specify the path for the Unix socket that will be used to listen for</span>
<span class="hljs-comment"># incoming connections. There is no default, so Redis will not listen</span>
<span class="hljs-comment"># on a unix socket when not specified.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># unixsocket /tmp/redis.sock</span>
<span class="hljs-comment"># unixsocketperm 700</span>

<span class="hljs-comment"># Close the connection after a client is idle for N seconds (0 to disable)</span>
timeout 0

<span class="hljs-comment"># TCP keepalive.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence</span>
<span class="hljs-comment"># of communication. This is useful for two reasons:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) Detect dead peers.</span>
<span class="hljs-comment"># 2) Take the connection alive from the point of view of network</span>
<span class="hljs-comment">#    equipment in the middle.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># On Linux, the specified value (in seconds) is the period used to send ACKs.</span>
<span class="hljs-comment"># Note that to close the connection the double of the time is needed.</span>
<span class="hljs-comment"># On other kernels the period depends on the kernel configuration.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># A reasonable value for this option is 300 seconds, which is the new</span>
<span class="hljs-comment"># Redis default starting with Redis 3.2.1.</span>
tcp-keepalive 300

<span class="hljs-comment">################################# GENERAL #####################################</span>

<span class="hljs-comment"># By default Redis does not run as a daemon. Use &apos;yes&apos; if you need it.</span>
<span class="hljs-comment"># Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</span>
daemonize yes

<span class="hljs-comment"># If you run Redis from upstart or systemd, Redis can interact with your</span>
<span class="hljs-comment"># supervision tree. Options:</span>
<span class="hljs-comment">#   supervised no      - no supervision interaction</span>
<span class="hljs-comment">#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode</span>
<span class="hljs-comment">#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET</span>
<span class="hljs-comment">#   supervised auto    - detect upstart or systemd method based on</span>
<span class="hljs-comment">#                        UPSTART_JOB or NOTIFY_SOCKET environment variables</span>
<span class="hljs-comment"># Note: these supervision methods only signal &quot;process is ready.&quot;</span>
<span class="hljs-comment">#       They do not enable continuous liveness pings back to your supervisor.</span>
supervised no

<span class="hljs-comment"># If a pid file is specified, Redis writes it where specified at startup</span>
<span class="hljs-comment"># and removes it at exit.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># When the server runs non daemonized, no pid file is created if none is</span>
<span class="hljs-comment"># specified in the configuration. When the server is daemonized, the pid file</span>
<span class="hljs-comment"># is used even if not specified, defaulting to &quot;/var/run/redis.pid&quot;.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Creating a pid file is best effort: if Redis is not able to create it</span>
<span class="hljs-comment"># nothing bad happens, the server will start and run normally.</span>
pidfile /var/run/redis_6379.pid

<span class="hljs-comment"># Specify the server verbosity level.</span>
<span class="hljs-comment"># This can be one of:</span>
<span class="hljs-comment"># debug (a lot of information, useful for development/testing)</span>
<span class="hljs-comment"># verbose (many rarely useful info, but not a mess like the debug level)</span>
<span class="hljs-comment"># notice (moderately verbose, what you want in production probably)</span>
<span class="hljs-comment"># warning (only very important / critical messages are logged)</span>
loglevel notice

<span class="hljs-comment"># Specify the log file name. Also the empty string can be used to force</span>
<span class="hljs-comment"># Redis to log on the standard output. Note that if you use standard</span>
<span class="hljs-comment"># output for logging but daemonize, logs will be sent to /dev/null</span>
logfile /var/<span class="hljs-built_in">log</span>/redis_6379.log

<span class="hljs-comment"># To enable logging to the system logger, just set &apos;syslog-enabled&apos; to yes,</span>
<span class="hljs-comment"># and optionally update the other syslog parameters to suit your needs.</span>
<span class="hljs-comment"># syslog-enabled no</span>

<span class="hljs-comment"># Specify the syslog identity.</span>
<span class="hljs-comment"># syslog-ident redis</span>

<span class="hljs-comment"># Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</span>
<span class="hljs-comment"># syslog-facility local0</span>

<span class="hljs-comment"># Set the number of databases. The default database is DB 0, you can select</span>
<span class="hljs-comment"># a different one on a per-connection basis using SELECT &lt;dbid&gt; where</span>
<span class="hljs-comment"># dbid is a number between 0 and &apos;databases&apos;-1</span>
databases 16

<span class="hljs-comment"># By default Redis shows an ASCII art logo only when started to log to the</span>
<span class="hljs-comment"># standard output and if the standard output is a TTY. Basically this means</span>
<span class="hljs-comment"># that normally a logo is displayed only in interactive sessions.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># However it is possible to force the pre-4.0 behavior and always show a</span>
<span class="hljs-comment"># ASCII art logo in startup logs by setting the following option to yes.</span>
always-show-logo yes

<span class="hljs-comment">################################ SNAPSHOTTING  ################################</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Save the DB on disk:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   save &lt;seconds&gt; &lt;changes&gt;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   Will save the DB if both the given number of seconds and the given</span>
<span class="hljs-comment">#   number of write operations against the DB occurred.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   In the example below the behaviour will be to save:</span>
<span class="hljs-comment">#   after 900 sec (15 min) if at least 1 key changed</span>
<span class="hljs-comment">#   after 300 sec (5 min) if at least 10 keys changed</span>
<span class="hljs-comment">#   after 60 sec if at least 10000 keys changed</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   Note: you can disable saving completely by commenting out all &quot;save&quot; lines.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   It is also possible to remove all the previously configured save</span>
<span class="hljs-comment">#   points by adding a save directive with a single empty string argument</span>
<span class="hljs-comment">#   like in the following example:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   save &quot;&quot;</span>

save 900 1
save 300 10
save 60 10000

<span class="hljs-comment"># By default Redis will stop accepting writes if RDB snapshots are enabled</span>
<span class="hljs-comment"># (at least one save point) and the latest background save failed.</span>
<span class="hljs-comment"># This will make the user aware (in a hard way) that data is not persisting</span>
<span class="hljs-comment"># on disk properly, otherwise chances are that no one will notice and some</span>
<span class="hljs-comment"># disaster will happen.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If the background saving process will start working again Redis will</span>
<span class="hljs-comment"># automatically allow writes again.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># However if you have setup your proper monitoring of the Redis server</span>
<span class="hljs-comment"># and persistence, you may want to disable this feature so that Redis will</span>
<span class="hljs-comment"># continue to work as usual even if there are problems with disk,</span>
<span class="hljs-comment"># permissions, and so forth.</span>
stop-writes-on-bgsave-error yes

<span class="hljs-comment"># Compress string objects using LZF when dump .rdb databases?</span>
<span class="hljs-comment"># For default that&apos;s set to &apos;yes&apos; as it&apos;s almost always a win.</span>
<span class="hljs-comment"># If you want to save some CPU in the saving child set it to &apos;no&apos; but</span>
<span class="hljs-comment"># the dataset will likely be bigger if you have compressible values or keys.</span>
rdbcompression yes

<span class="hljs-comment"># Since version 5 of RDB a CRC64 checksum is placed at the end of the file.</span>
<span class="hljs-comment"># This makes the format more resistant to corruption but there is a performance</span>
<span class="hljs-comment"># hit to pay (around 10%) when saving and loading RDB files, so you can disable it</span>
<span class="hljs-comment"># for maximum performances.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># RDB files created with checksum disabled have a checksum of zero that will</span>
<span class="hljs-comment"># tell the loading code to skip the check.</span>
rdbchecksum yes

<span class="hljs-comment"># The filename where to dump the DB</span>
dbfilename dump.rdb

<span class="hljs-comment"># The working directory.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The DB will be written inside this directory, with the filename specified</span>
<span class="hljs-comment"># above using the &apos;dbfilename&apos; configuration directive.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The Append Only File will also be created inside this directory.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Note that you must specify a directory here, not a file name.</span>
dir /var/lib/redis/6379

<span class="hljs-comment">################################# REPLICATION #################################</span>

<span class="hljs-comment"># Master-Slave replication. Use slaveof to make a Redis instance a copy of</span>
<span class="hljs-comment"># another Redis server. A few things to understand ASAP about Redis replication.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) Redis replication is asynchronous, but you can configure a master to</span>
<span class="hljs-comment">#    stop accepting writes if it appears to be not connected with at least</span>
<span class="hljs-comment">#    a given number of slaves.</span>
<span class="hljs-comment"># 2) Redis slaves are able to perform a partial resynchronization with the</span>
<span class="hljs-comment">#    master if the replication link is lost for a relatively small amount of</span>
<span class="hljs-comment">#    time. You may want to configure the replication backlog size (see the next</span>
<span class="hljs-comment">#    sections of this file) with a sensible value depending on your needs.</span>
<span class="hljs-comment"># 3) Replication is automatic and does not need user intervention. After a</span>
<span class="hljs-comment">#    network partition slaves automatically try to reconnect to masters</span>
<span class="hljs-comment">#    and resynchronize with them.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># slaveof &lt;masterip&gt; &lt;masterport&gt;</span>

<span class="hljs-comment"># If the master is password protected (using the &quot;requirepass&quot; configuration</span>
<span class="hljs-comment"># directive below) it is possible to tell the slave to authenticate before</span>
<span class="hljs-comment"># starting the replication synchronization process, otherwise the master will</span>
<span class="hljs-comment"># refuse the slave request.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># masterauth &lt;master-password&gt;</span>

<span class="hljs-comment"># When a slave loses its connection with the master, or when the replication</span>
<span class="hljs-comment"># is still in progress, the slave can act in two different ways:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) if slave-serve-stale-data is set to &apos;yes&apos; (the default) the slave will</span>
<span class="hljs-comment">#    still reply to client requests, possibly with out of date data, or the</span>
<span class="hljs-comment">#    data set may just be empty if this is the first synchronization.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 2) if slave-serve-stale-data is set to &apos;no&apos; the slave will reply with</span>
<span class="hljs-comment">#    an error &quot;SYNC with master in progress&quot; to all the kind of commands</span>
<span class="hljs-comment">#    but to INFO and SLAVEOF.</span>
<span class="hljs-comment">#</span>
slave-serve-stale-data yes

<span class="hljs-comment"># You can configure a slave instance to accept writes or not. Writing against</span>
<span class="hljs-comment"># a slave instance may be useful to store some ephemeral data (because data</span>
<span class="hljs-comment"># written on a slave will be easily deleted after resync with the master) but</span>
<span class="hljs-comment"># may also cause problems if clients are writing to it because of a</span>
<span class="hljs-comment"># misconfiguration.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Since Redis 2.6 by default slaves are read-only.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Note: read only slaves are not designed to be exposed to untrusted clients</span>
<span class="hljs-comment"># on the internet. It&apos;s just a protection layer against misuse of the instance.</span>
<span class="hljs-comment"># Still a read only slave exports by default all the administrative commands</span>
<span class="hljs-comment"># such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</span>
<span class="hljs-comment"># security of read only slaves using &apos;rename-command&apos; to shadow all the</span>
<span class="hljs-comment"># administrative / dangerous commands.</span>
slave-read-only yes

<span class="hljs-comment"># Replication SYNC strategy: disk or socket.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># -------------------------------------------------------</span>
<span class="hljs-comment"># WARNING: DISKLESS REPLICATION IS EXPERIMENTAL CURRENTLY</span>
<span class="hljs-comment"># -------------------------------------------------------</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># New slaves and reconnecting slaves that are not able to continue the replication</span>
<span class="hljs-comment"># process just receiving differences, need to do what is called a &quot;full</span>
<span class="hljs-comment"># synchronization&quot;. An RDB file is transmitted from the master to the slaves.</span>
<span class="hljs-comment"># The transmission can happen in two different ways:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) Disk-backed: The Redis master creates a new process that writes the RDB</span>
<span class="hljs-comment">#                 file on disk. Later the file is transferred by the parent</span>
<span class="hljs-comment">#                 process to the slaves incrementally.</span>
<span class="hljs-comment"># 2) Diskless: The Redis master creates a new process that directly writes the</span>
<span class="hljs-comment">#              RDB file to slave sockets, without touching the disk at all.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># With disk-backed replication, while the RDB file is generated, more slaves</span>
<span class="hljs-comment"># can be queued and served with the RDB file as soon as the current child producing</span>
<span class="hljs-comment"># the RDB file finishes its work. With diskless replication instead once</span>
<span class="hljs-comment"># the transfer starts, new slaves arriving will be queued and a new transfer</span>
<span class="hljs-comment"># will start when the current one terminates.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># When diskless replication is used, the master waits a configurable amount of</span>
<span class="hljs-comment"># time (in seconds) before starting the transfer in the hope that multiple slaves</span>
<span class="hljs-comment"># will arrive and the transfer can be parallelized.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># With slow disks and fast (large bandwidth) networks, diskless replication</span>
<span class="hljs-comment"># works better.</span>
repl-diskless-sync no

<span class="hljs-comment"># When diskless replication is enabled, it is possible to configure the delay</span>
<span class="hljs-comment"># the server waits in order to spawn the child that transfers the RDB via socket</span>
<span class="hljs-comment"># to the slaves.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This is important since once the transfer starts, it is not possible to serve</span>
<span class="hljs-comment"># new slaves arriving, that will be queued for the next RDB transfer, so the server</span>
<span class="hljs-comment"># waits a delay in order to let more slaves arrive.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The delay is specified in seconds, and by default is 5 seconds. To disable</span>
<span class="hljs-comment"># it entirely just set it to 0 seconds and the transfer will start ASAP.</span>
repl-diskless-sync-delay 5

<span class="hljs-comment"># Slaves send PINGs to server in a predefined interval. It&apos;s possible to change</span>
<span class="hljs-comment"># this interval with the repl_ping_slave_period option. The default value is 10</span>
<span class="hljs-comment"># seconds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-ping-slave-period 10</span>

<span class="hljs-comment"># The following option sets the replication timeout for:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) Bulk transfer I/O during SYNC, from the point of view of slave.</span>
<span class="hljs-comment"># 2) Master timeout from the point of view of slaves (data, pings).</span>
<span class="hljs-comment"># 3) Slave timeout from the point of view of masters (REPLCONF ACK pings).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># It is important to make sure that this value is greater than the value</span>
<span class="hljs-comment"># specified for repl-ping-slave-period otherwise a timeout will be detected</span>
<span class="hljs-comment"># every time there is low traffic between the master and the slave.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-timeout 60</span>

<span class="hljs-comment"># Disable TCP_NODELAY on the slave socket after SYNC?</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If you select &quot;yes&quot; Redis will use a smaller number of TCP packets and</span>
<span class="hljs-comment"># less bandwidth to send data to slaves. But this can add a delay for</span>
<span class="hljs-comment"># the data to appear on the slave side, up to 40 milliseconds with</span>
<span class="hljs-comment"># Linux kernels using a default configuration.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If you select &quot;no&quot; the delay for data to appear on the slave side will</span>
<span class="hljs-comment"># be reduced but more bandwidth will be used for replication.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default we optimize for low latency, but in very high traffic conditions</span>
<span class="hljs-comment"># or when the master and slaves are many hops away, turning this to &quot;yes&quot; may</span>
<span class="hljs-comment"># be a good idea.</span>
repl-disable-tcp-nodelay no

<span class="hljs-comment"># Set the replication backlog size. The backlog is a buffer that accumulates</span>
<span class="hljs-comment"># slave data when slaves are disconnected for some time, so that when a slave</span>
<span class="hljs-comment"># wants to reconnect again, often a full resync is not needed, but a partial</span>
<span class="hljs-comment"># resync is enough, just passing the portion of data the slave missed while</span>
<span class="hljs-comment"># disconnected.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The bigger the replication backlog, the longer the time the slave can be</span>
<span class="hljs-comment"># disconnected and later be able to perform a partial resynchronization.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The backlog is only allocated once there is at least a slave connected.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-backlog-size 1mb</span>

<span class="hljs-comment"># After a master has no longer connected slaves for some time, the backlog</span>
<span class="hljs-comment"># will be freed. The following option configures the amount of seconds that</span>
<span class="hljs-comment"># need to elapse, starting from the time the last slave disconnected, for</span>
<span class="hljs-comment"># the backlog buffer to be freed.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Note that slaves never free the backlog for timeout, since they may be</span>
<span class="hljs-comment"># promoted to masters later, and should be able to correctly &quot;partially</span>
<span class="hljs-comment"># resynchronize&quot; with the slaves: hence they should always accumulate backlog.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># A value of 0 means to never release the backlog.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># repl-backlog-ttl 3600</span>

<span class="hljs-comment"># The slave priority is an integer number published by Redis in the INFO output.</span>
<span class="hljs-comment"># It is used by Redis Sentinel in order to select a slave to promote into a</span>
<span class="hljs-comment"># master if the master is no longer working correctly.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># A slave with a low priority number is considered better for promotion, so</span>
<span class="hljs-comment"># for instance if there are three slaves with priority 10, 100, 25 Sentinel will</span>
<span class="hljs-comment"># pick the one with priority 10, that is the lowest.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># However a special priority of 0 marks the slave as not able to perform the</span>
<span class="hljs-comment"># role of master, so a slave with priority of 0 will never be selected by</span>
<span class="hljs-comment"># Redis Sentinel for promotion.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default the priority is 100.</span>
slave-priority 100

<span class="hljs-comment"># It is possible for a master to stop accepting writes if there are less than</span>
<span class="hljs-comment"># N slaves connected, having a lag less or equal than M seconds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The N slaves need to be in &quot;online&quot; state.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The lag in seconds, that must be &lt;= the specified value, is calculated from</span>
<span class="hljs-comment"># the last ping received from the slave, that is usually sent every second.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This option does not GUARANTEE that N replicas will accept the write, but</span>
<span class="hljs-comment"># will limit the window of exposure for lost writes in case not enough slaves</span>
<span class="hljs-comment"># are available, to the specified number of seconds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># For example to require at least 3 slaves with a lag &lt;= 10 seconds use:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># min-slaves-to-write 3</span>
<span class="hljs-comment"># min-slaves-max-lag 10</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Setting one or the other to 0 disables the feature.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default min-slaves-to-write is set to 0 (feature disabled) and</span>
<span class="hljs-comment"># min-slaves-max-lag is set to 10.</span>

<span class="hljs-comment"># A Redis master is able to list the address and port of the attached</span>
<span class="hljs-comment"># slaves in different ways. For example the &quot;INFO replication&quot; section</span>
<span class="hljs-comment"># offers this information, which is used, among other tools, by</span>
<span class="hljs-comment"># Redis Sentinel in order to discover slave instances.</span>
<span class="hljs-comment"># Another place where this info is available is in the output of the</span>
<span class="hljs-comment"># &quot;ROLE&quot; command of a master.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The listed IP and address normally reported by a slave is obtained</span>
<span class="hljs-comment"># in the following way:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   IP: The address is auto detected by checking the peer address</span>
<span class="hljs-comment">#   of the socket used by the slave to connect with the master.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   Port: The port is communicated by the slave during the replication</span>
<span class="hljs-comment">#   handshake, and is normally the port that the slave is using to</span>
<span class="hljs-comment">#   list for connections.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># However when port forwarding or Network Address Translation (NAT) is</span>
<span class="hljs-comment"># used, the slave may be actually reachable via different IP and port</span>
<span class="hljs-comment"># pairs. The following two options can be used by a slave in order to</span>
<span class="hljs-comment"># report to its master a specific set of IP and port, so that both INFO</span>
<span class="hljs-comment"># and ROLE will report those values.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># There is no need to use both the options if you need to override just</span>
<span class="hljs-comment"># the port or the IP address.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># slave-announce-ip 5.5.5.5</span>
<span class="hljs-comment"># slave-announce-port 1234</span>

<span class="hljs-comment">################################## SECURITY ###################################</span>

<span class="hljs-comment"># Require clients to issue AUTH &lt;PASSWORD&gt; before processing any other</span>
<span class="hljs-comment"># commands.  This might be useful in environments in which you do not trust</span>
<span class="hljs-comment"># others with access to the host running redis-server.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This should stay commented out for backward compatibility and because most</span>
<span class="hljs-comment"># people do not need auth (e.g. they run their own servers).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Warning: since Redis is pretty fast an outside user can try up to</span>
<span class="hljs-comment"># 150k passwords per second against a good box. This means that you should</span>
<span class="hljs-comment"># use a very strong password otherwise it will be very easy to break.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># requirepass foobared</span>

<span class="hljs-comment"># Command renaming.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># It is possible to change the name of dangerous commands in a shared</span>
<span class="hljs-comment"># environment. For instance the CONFIG command may be renamed into something</span>
<span class="hljs-comment"># hard to guess so that it will still be available for internal-use tools</span>
<span class="hljs-comment"># but not available for general clients.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Example:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># It is also possible to completely kill a command by renaming it into</span>
<span class="hljs-comment"># an empty string:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># rename-command CONFIG &quot;&quot;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Please note that changing the name of commands that are logged into the</span>
<span class="hljs-comment"># AOF file or transmitted to slaves may cause problems.</span>

<span class="hljs-comment">################################### CLIENTS ####################################</span>

<span class="hljs-comment"># Set the max number of connected clients at the same time. By default</span>
<span class="hljs-comment"># this limit is set to 10000 clients, however if the Redis server is not</span>
<span class="hljs-comment"># able to configure the process file limit to allow for the specified limit</span>
<span class="hljs-comment"># the max number of allowed clients is set to the current file limit</span>
<span class="hljs-comment"># minus 32 (as Redis reserves a few file descriptors for internal uses).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Once the limit is reached Redis will close all the new connections sending</span>
<span class="hljs-comment"># an error &apos;max number of clients reached&apos;.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># maxclients 10000</span>

<span class="hljs-comment">############################## MEMORY MANAGEMENT ################################</span>

<span class="hljs-comment"># Set a memory usage limit to the specified amount of bytes.</span>
<span class="hljs-comment"># When the memory limit is reached Redis will try to remove keys</span>
<span class="hljs-comment"># according to the eviction policy selected (see maxmemory-policy).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If Redis can&apos;t remove keys according to the policy, or if the policy is</span>
<span class="hljs-comment"># set to &apos;noeviction&apos;, Redis will start to reply with errors to commands</span>
<span class="hljs-comment"># that would use more memory, like SET, LPUSH, and so on, and will continue</span>
<span class="hljs-comment"># to reply to read-only commands like GET.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This option is usually useful when using Redis as an LRU or LFU cache, or to</span>
<span class="hljs-comment"># set a hard memory limit for an instance (using the &apos;noeviction&apos; policy).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># WARNING: If you have slaves attached to an instance with maxmemory on,</span>
<span class="hljs-comment"># the size of the output buffers needed to feed the slaves are subtracted</span>
<span class="hljs-comment"># from the used memory count, so that network problems / resyncs will</span>
<span class="hljs-comment"># not trigger a loop where keys are evicted, and in turn the output</span>
<span class="hljs-comment"># buffer of slaves is full with DELs of keys evicted triggering the deletion</span>
<span class="hljs-comment"># of more keys, and so forth until the database is completely emptied.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># In short... if you have slaves attached it is suggested that you set a lower</span>
<span class="hljs-comment"># limit for maxmemory so that there is some free RAM on the system for slave</span>
<span class="hljs-comment"># output buffers (but this is not needed if the policy is &apos;noeviction&apos;).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># maxmemory &lt;bytes&gt;</span>

<span class="hljs-comment"># MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</span>
<span class="hljs-comment"># is reached. You can select among five behaviors:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># volatile-lru -&gt; Evict using approximated LRU among the keys with an expire set.</span>
<span class="hljs-comment"># allkeys-lru -&gt; Evict any key using approximated LRU.</span>
<span class="hljs-comment"># volatile-lfu -&gt; Evict using approximated LFU among the keys with an expire set.</span>
<span class="hljs-comment"># allkeys-lfu -&gt; Evict any key using approximated LFU.</span>
<span class="hljs-comment"># volatile-random -&gt; Remove a random key among the ones with an expire set.</span>
<span class="hljs-comment"># allkeys-random -&gt; Remove a random key, any key.</span>
<span class="hljs-comment"># volatile-ttl -&gt; Remove the key with the nearest expire time (minor TTL)</span>
<span class="hljs-comment"># noeviction -&gt; Don&apos;t evict anything, just return an error on write operations.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># LRU means Least Recently Used</span>
<span class="hljs-comment"># LFU means Least Frequently Used</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Both LRU, LFU and volatile-ttl are implemented using approximated</span>
<span class="hljs-comment"># randomized algorithms.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Note: with any of the above policies, Redis will return an error on write</span>
<span class="hljs-comment">#       operations, when there are no suitable keys for eviction.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#       At the date of writing these commands are: set setnx setex append</span>
<span class="hljs-comment">#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span>
<span class="hljs-comment">#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span>
<span class="hljs-comment">#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span>
<span class="hljs-comment">#       getset mset msetnx exec sort</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default is:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># maxmemory-policy noeviction</span>

<span class="hljs-comment"># LRU, LFU and minimal TTL algorithms are not precise algorithms but approximated</span>
<span class="hljs-comment"># algorithms (in order to save memory), so you can tune it for speed or</span>
<span class="hljs-comment"># accuracy. For default Redis will check five keys and pick the one that was</span>
<span class="hljs-comment"># used less recently, you can change the sample size using the following</span>
<span class="hljs-comment"># configuration directive.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default of 5 produces good enough results. 10 Approximates very closely</span>
<span class="hljs-comment"># true LRU but costs more CPU. 3 is faster but not very accurate.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># maxmemory-samples 5</span>

<span class="hljs-comment">############################# LAZY FREEING ####################################</span>

<span class="hljs-comment"># Redis has two primitives to delete keys. One is called DEL and is a blocking</span>
<span class="hljs-comment"># deletion of the object. It means that the server stops processing new commands</span>
<span class="hljs-comment"># in order to reclaim all the memory associated with an object in a synchronous</span>
<span class="hljs-comment"># way. If the key deleted is associated with a small object, the time needed</span>
<span class="hljs-comment"># in order to execute the DEL command is very small and comparable to most other</span>
<span class="hljs-comment"># O(1) or O(log_N) commands in Redis. However if the key is associated with an</span>
<span class="hljs-comment"># aggregated value containing millions of elements, the server can block for</span>
<span class="hljs-comment"># a long time (even seconds) in order to complete the operation.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># For the above reasons Redis also offers non blocking deletion primitives</span>
<span class="hljs-comment"># such as UNLINK (non blocking DEL) and the ASYNC option of FLUSHALL and</span>
<span class="hljs-comment"># FLUSHDB commands, in order to reclaim memory in background. Those commands</span>
<span class="hljs-comment"># are executed in constant time. Another thread will incrementally free the</span>
<span class="hljs-comment"># object in the background as fast as possible.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># DEL, UNLINK and ASYNC option of FLUSHALL and FLUSHDB are user-controlled.</span>
<span class="hljs-comment"># It&apos;s up to the design of the application to understand when it is a good</span>
<span class="hljs-comment"># idea to use one or the other. However the Redis server sometimes has to</span>
<span class="hljs-comment"># delete keys or flush the whole database as a side effect of other operations.</span>
<span class="hljs-comment"># Specifically Redis deletes objects independently of a user call in the</span>
<span class="hljs-comment"># following scenarios:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) On eviction, because of the maxmemory and maxmemory policy configurations,</span>
<span class="hljs-comment">#    in order to make room for new data, without going over the specified</span>
<span class="hljs-comment">#    memory limit.</span>
<span class="hljs-comment"># 2) Because of expire: when a key with an associated time to live (see the</span>
<span class="hljs-comment">#    EXPIRE command) must be deleted from memory.</span>
<span class="hljs-comment"># 3) Because of a side effect of a command that stores data on a key that may</span>
<span class="hljs-comment">#    already exist. For example the RENAME command may delete the old key</span>
<span class="hljs-comment">#    content when it is replaced with another one. Similarly SUNIONSTORE</span>
<span class="hljs-comment">#    or SORT with STORE option may delete existing keys. The SET command</span>
<span class="hljs-comment">#    itself removes any old content of the specified key in order to replace</span>
<span class="hljs-comment">#    it with the specified string.</span>
<span class="hljs-comment"># 4) During replication, when a slave performs a full resynchronization with</span>
<span class="hljs-comment">#    its master, the content of the whole database is removed in order to</span>
<span class="hljs-comment">#    load the RDB file just transfered.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># In all the above cases the default is to delete objects in a blocking way,</span>
<span class="hljs-comment"># like if DEL was called. However you can configure each case specifically</span>
<span class="hljs-comment"># in order to instead release memory in a non-blocking way like if UNLINK</span>
<span class="hljs-comment"># was called, using the following configuration directives:</span>

lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del no
slave-lazy-flush no

<span class="hljs-comment">############################## APPEND ONLY MODE ###############################</span>

<span class="hljs-comment"># By default Redis asynchronously dumps the dataset on disk. This mode is</span>
<span class="hljs-comment"># good enough in many applications, but an issue with the Redis process or</span>
<span class="hljs-comment"># a power outage may result into a few minutes of writes lost (depending on</span>
<span class="hljs-comment"># the configured save points).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The Append Only File is an alternative persistence mode that provides</span>
<span class="hljs-comment"># much better durability. For instance using the default data fsync policy</span>
<span class="hljs-comment"># (see later in the config file) Redis can lose just one second of writes in a</span>
<span class="hljs-comment"># dramatic event like a server power outage, or a single write if something</span>
<span class="hljs-comment"># wrong with the Redis process itself happens, but the operating system is</span>
<span class="hljs-comment"># still running correctly.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># AOF and RDB persistence can be enabled at the same time without problems.</span>
<span class="hljs-comment"># If the AOF is enabled on startup Redis will load the AOF, that is the file</span>
<span class="hljs-comment"># with the better durability guarantees.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Please check http://redis.io/topics/persistence for more information.</span>

appendonly no

<span class="hljs-comment"># The name of the append only file (default: &quot;appendonly.aof&quot;)</span>

appendfilename <span class="hljs-string">&quot;appendonly.aof&quot;</span>

<span class="hljs-comment"># The fsync() call tells the Operating System to actually write data on disk</span>
<span class="hljs-comment"># instead of waiting for more data in the output buffer. Some OS will really flush</span>
<span class="hljs-comment"># data on disk, some other OS will just try to do it ASAP.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Redis supports three different modes:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># no: don&apos;t fsync, just let the OS flush the data when it wants. Faster.</span>
<span class="hljs-comment"># always: fsync after every write to the append only log. Slow, Safest.</span>
<span class="hljs-comment"># everysec: fsync only one time every second. Compromise.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default is &quot;everysec&quot;, as that&apos;s usually the right compromise between</span>
<span class="hljs-comment"># speed and data safety. It&apos;s up to you to understand if you can relax this to</span>
<span class="hljs-comment"># &quot;no&quot; that will let the operating system flush the output buffer when</span>
<span class="hljs-comment"># it wants, for better performances (but if you can live with the idea of</span>
<span class="hljs-comment"># some data loss consider the default persistence mode that&apos;s snapshotting),</span>
<span class="hljs-comment"># or on the contrary, use &quot;always&quot; that&apos;s very slow but a bit safer than</span>
<span class="hljs-comment"># everysec.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># More details please check the following article:</span>
<span class="hljs-comment"># http://antirez.com/post/redis-persistence-demystified.html</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If unsure, use &quot;everysec&quot;.</span>

<span class="hljs-comment"># appendfsync always</span>
appendfsync everysec
<span class="hljs-comment"># appendfsync no</span>

<span class="hljs-comment"># When the AOF fsync policy is set to always or everysec, and a background</span>
<span class="hljs-comment"># saving process (a background save or AOF log background rewriting) is</span>
<span class="hljs-comment"># performing a lot of I/O against the disk, in some Linux configurations</span>
<span class="hljs-comment"># Redis may block too long on the fsync() call. Note that there is no fix for</span>
<span class="hljs-comment"># this currently, as even performing fsync in a different thread will block</span>
<span class="hljs-comment"># our synchronous write(2) call.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># In order to mitigate this problem it&apos;s possible to use the following option</span>
<span class="hljs-comment"># that will prevent fsync() from being called in the main process while a</span>
<span class="hljs-comment"># BGSAVE or BGREWRITEAOF is in progress.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This means that while another child is saving, the durability of Redis is</span>
<span class="hljs-comment"># the same as &quot;appendfsync none&quot;. In practical terms, this means that it is</span>
<span class="hljs-comment"># possible to lose up to 30 seconds of log in the worst scenario (with the</span>
<span class="hljs-comment"># default Linux settings).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If you have latency problems turn this to &quot;yes&quot;. Otherwise leave it as</span>
<span class="hljs-comment"># &quot;no&quot; that is the safest pick from the point of view of durability.</span>

no-appendfsync-on-rewrite no

<span class="hljs-comment"># Automatic rewrite of the append only file.</span>
<span class="hljs-comment"># Redis is able to automatically rewrite the log file implicitly calling</span>
<span class="hljs-comment"># BGREWRITEAOF when the AOF log size grows by the specified percentage.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This is how it works: Redis remembers the size of the AOF file after the</span>
<span class="hljs-comment"># latest rewrite (if no rewrite has happened since the restart, the size of</span>
<span class="hljs-comment"># the AOF at startup is used).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This base size is compared to the current size. If the current size is</span>
<span class="hljs-comment"># bigger than the specified percentage, the rewrite is triggered. Also</span>
<span class="hljs-comment"># you need to specify a minimal size for the AOF file to be rewritten, this</span>
<span class="hljs-comment"># is useful to avoid rewriting the AOF file even if the percentage increase</span>
<span class="hljs-comment"># is reached but it is still pretty small.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Specify a percentage of zero in order to disable the automatic AOF</span>
<span class="hljs-comment"># rewrite feature.</span>

auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

<span class="hljs-comment"># An AOF file may be found to be truncated at the end during the Redis</span>
<span class="hljs-comment"># startup process, when the AOF data gets loaded back into memory.</span>
<span class="hljs-comment"># This may happen when the system where Redis is running</span>
<span class="hljs-comment"># crashes, especially when an ext4 filesystem is mounted without the</span>
<span class="hljs-comment"># data=ordered option (however this can&apos;t happen when Redis itself</span>
<span class="hljs-comment"># crashes or aborts but the operating system still works correctly).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Redis can either exit with an error when this happens, or load as much</span>
<span class="hljs-comment"># data as possible (the default now) and start if the AOF file is found</span>
<span class="hljs-comment"># to be truncated at the end. The following option controls this behavior.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If aof-load-truncated is set to yes, a truncated AOF file is loaded and</span>
<span class="hljs-comment"># the Redis server starts emitting a log to inform the user of the event.</span>
<span class="hljs-comment"># Otherwise if the option is set to no, the server aborts with an error</span>
<span class="hljs-comment"># and refuses to start. When the option is set to no, the user requires</span>
<span class="hljs-comment"># to fix the AOF file using the &quot;redis-check-aof&quot; utility before to restart</span>
<span class="hljs-comment"># the server.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Note that if the AOF file will be found to be corrupted in the middle</span>
<span class="hljs-comment"># the server will still exit with an error. This option only applies when</span>
<span class="hljs-comment"># Redis will try to read more data from the AOF file but not enough bytes</span>
<span class="hljs-comment"># will be found.</span>
aof-load-truncated yes

<span class="hljs-comment"># When rewriting the AOF file, Redis is able to use an RDB preamble in the</span>
<span class="hljs-comment"># AOF file for faster rewrites and recoveries. When this option is turned</span>
<span class="hljs-comment"># on the rewritten AOF file is composed of two different stanzas:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   [RDB file][AOF tail]</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># When loading Redis recognizes that the AOF file starts with the &quot;REDIS&quot;</span>
<span class="hljs-comment"># string and loads the prefixed RDB file, and continues loading the AOF</span>
<span class="hljs-comment"># tail.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This is currently turned off by default in order to avoid the surprise</span>
<span class="hljs-comment"># of a format change, but will at some point be used as the default.</span>
aof-use-rdb-preamble no

<span class="hljs-comment">################################ LUA SCRIPTING  ###############################</span>

<span class="hljs-comment"># Max execution time of a Lua script in milliseconds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If the maximum execution time is reached Redis will log that a script is</span>
<span class="hljs-comment"># still in execution after the maximum allowed time and will start to</span>
<span class="hljs-comment"># reply to queries with an error.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># When a long running script exceeds the maximum execution time only the</span>
<span class="hljs-comment"># SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</span>
<span class="hljs-comment"># used to stop a script that did not yet called write commands. The second</span>
<span class="hljs-comment"># is the only way to shut down the server in the case a write command was</span>
<span class="hljs-comment"># already issued by the script but the user doesn&apos;t want to wait for the natural</span>
<span class="hljs-comment"># termination of the script.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Set it to 0 or a negative value for unlimited execution without warnings.</span>
lua-time-limit 5000

<span class="hljs-comment">################################ REDIS CLUSTER  ###############################</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="hljs-comment"># WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however</span>
<span class="hljs-comment"># in order to mark it as &quot;mature&quot; we need to wait for a non trivial percentage</span>
<span class="hljs-comment"># of users to deploy it in production.</span>
<span class="hljs-comment"># ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Normal Redis instances can&apos;t be part of a Redis Cluster; only nodes that are</span>
<span class="hljs-comment"># started as cluster nodes can. In order to start a Redis instance as a</span>
<span class="hljs-comment"># cluster node enable the cluster support uncommenting the following:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-enabled yes</span>

<span class="hljs-comment"># Every cluster node has a cluster configuration file. This file is not</span>
<span class="hljs-comment"># intended to be edited by hand. It is created and updated by Redis nodes.</span>
<span class="hljs-comment"># Every Redis Cluster node requires a different cluster configuration file.</span>
<span class="hljs-comment"># Make sure that instances running in the same system do not have</span>
<span class="hljs-comment"># overlapping cluster configuration file names.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-config-file nodes-6379.conf</span>

<span class="hljs-comment"># Cluster node timeout is the amount of milliseconds a node must be unreachable</span>
<span class="hljs-comment"># for it to be considered in failure state.</span>
<span class="hljs-comment"># Most other internal time limits are multiple of the node timeout.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-node-timeout 15000</span>

<span class="hljs-comment"># A slave of a failing master will avoid to start a failover if its data</span>
<span class="hljs-comment"># looks too old.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># There is no simple way for a slave to actually have an exact measure of</span>
<span class="hljs-comment"># its &quot;data age&quot;, so the following two checks are performed:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1) If there are multiple slaves able to failover, they exchange messages</span>
<span class="hljs-comment">#    in order to try to give an advantage to the slave with the best</span>
<span class="hljs-comment">#    replication offset (more data from the master processed).</span>
<span class="hljs-comment">#    Slaves will try to get their rank by offset, and apply to the start</span>
<span class="hljs-comment">#    of the failover a delay proportional to their rank.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 2) Every single slave computes the time of the last interaction with</span>
<span class="hljs-comment">#    its master. This can be the last ping or command received (if the master</span>
<span class="hljs-comment">#    is still in the &quot;connected&quot; state), or the time that elapsed since the</span>
<span class="hljs-comment">#    disconnection with the master (if the replication link is currently down).</span>
<span class="hljs-comment">#    If the last interaction is too old, the slave will not try to failover</span>
<span class="hljs-comment">#    at all.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The point &quot;2&quot; can be tuned by user. Specifically a slave will not perform</span>
<span class="hljs-comment"># the failover if, since the last interaction with the master, the time</span>
<span class="hljs-comment"># elapsed is greater than:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   (node-timeout * slave-validity-factor) + repl-ping-slave-period</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># So for example if node-timeout is 30 seconds, and the slave-validity-factor</span>
<span class="hljs-comment"># is 10, and assuming a default repl-ping-slave-period of 10 seconds, the</span>
<span class="hljs-comment"># slave will not try to failover if it was not able to talk with the master</span>
<span class="hljs-comment"># for longer than 310 seconds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># A large slave-validity-factor may allow slaves with too old data to failover</span>
<span class="hljs-comment"># a master, while a too small value may prevent the cluster from being able to</span>
<span class="hljs-comment"># elect a slave at all.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># For maximum availability, it is possible to set the slave-validity-factor</span>
<span class="hljs-comment"># to a value of 0, which means, that slaves will always try to failover the</span>
<span class="hljs-comment"># master regardless of the last time they interacted with the master.</span>
<span class="hljs-comment"># (However they&apos;ll always try to apply a delay proportional to their</span>
<span class="hljs-comment"># offset rank).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Zero is the only value able to guarantee that when all the partitions heal</span>
<span class="hljs-comment"># the cluster will always be able to continue.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-slave-validity-factor 10</span>

<span class="hljs-comment"># Cluster slaves are able to migrate to orphaned masters, that are masters</span>
<span class="hljs-comment"># that are left without working slaves. This improves the cluster ability</span>
<span class="hljs-comment"># to resist to failures as otherwise an orphaned master can&apos;t be failed over</span>
<span class="hljs-comment"># in case of failure if it has no working slaves.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Slaves migrate to orphaned masters only if there are still at least a</span>
<span class="hljs-comment"># given number of other working slaves for their old master. This number</span>
<span class="hljs-comment"># is the &quot;migration barrier&quot;. A migration barrier of 1 means that a slave</span>
<span class="hljs-comment"># will migrate only if there is at least 1 other working slave for its master</span>
<span class="hljs-comment"># and so forth. It usually reflects the number of slaves you want for every</span>
<span class="hljs-comment"># master in your cluster.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Default is 1 (slaves migrate only if their masters remain with at least</span>
<span class="hljs-comment"># one slave). To disable migration just set it to a very large value.</span>
<span class="hljs-comment"># A value of 0 can be set but is useful only for debugging and dangerous</span>
<span class="hljs-comment"># in production.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-migration-barrier 1</span>

<span class="hljs-comment"># By default Redis Cluster nodes stop accepting queries if they detect there</span>
<span class="hljs-comment"># is at least an hash slot uncovered (no available node is serving it).</span>
<span class="hljs-comment"># This way if the cluster is partially down (for example a range of hash slots</span>
<span class="hljs-comment"># are no longer covered) all the cluster becomes, eventually, unavailable.</span>
<span class="hljs-comment"># It automatically returns available as soon as all the slots are covered again.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># However sometimes you want the subset of the cluster which is working,</span>
<span class="hljs-comment"># to continue to accept queries for the part of the key space that is still</span>
<span class="hljs-comment"># covered. In order to do so, just set the cluster-require-full-coverage</span>
<span class="hljs-comment"># option to no.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-require-full-coverage yes</span>

<span class="hljs-comment"># This option, when set to yes, prevents slaves from trying to failover its</span>
<span class="hljs-comment"># master during master failures. However the master can still perform a</span>
<span class="hljs-comment"># manual failover, if forced to do so.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># This is useful in different scenarios, especially in the case of multiple</span>
<span class="hljs-comment"># data center operations, where we want one side to never be promoted if not</span>
<span class="hljs-comment"># in the case of a total DC failure.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-slave-no-failover no</span>

<span class="hljs-comment"># In order to setup your cluster make sure to read the documentation</span>
<span class="hljs-comment"># available at http://redis.io web site.</span>

<span class="hljs-comment">########################## CLUSTER DOCKER/NAT support  ########################</span>

<span class="hljs-comment"># In certain deployments, Redis Cluster nodes address discovery fails, because</span>
<span class="hljs-comment"># addresses are NAT-ted or because ports are forwarded (the typical case is</span>
<span class="hljs-comment"># Docker and other containers).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># In order to make Redis Cluster working in such environments, a static</span>
<span class="hljs-comment"># configuration where each node knows its public address is needed. The</span>
<span class="hljs-comment"># following two options are used for this scope, and are:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># * cluster-announce-ip</span>
<span class="hljs-comment"># * cluster-announce-port</span>
<span class="hljs-comment"># * cluster-announce-bus-port</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Each instruct the node about its address, client port, and cluster message</span>
<span class="hljs-comment"># bus port. The information is then published in the header of the bus packets</span>
<span class="hljs-comment"># so that other nodes will be able to correctly map the address of the node</span>
<span class="hljs-comment"># publishing the information.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If the above options are not used, the normal Redis Cluster auto-detection</span>
<span class="hljs-comment"># will be used instead.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Note that when remapped, the bus port may not be at the fixed offset of</span>
<span class="hljs-comment"># clients port + 10000, so you can specify any port and bus-port depending</span>
<span class="hljs-comment"># on how they get remapped. If the bus-port is not set, a fixed offset of</span>
<span class="hljs-comment"># 10000 will be used as usually.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Example:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># cluster-announce-ip 10.1.1.5</span>
<span class="hljs-comment"># cluster-announce-port 6379</span>
<span class="hljs-comment"># cluster-announce-bus-port 6380</span>

<span class="hljs-comment">################################## SLOW LOG ###################################</span>

<span class="hljs-comment"># The Redis Slow Log is a system to log queries that exceeded a specified</span>
<span class="hljs-comment"># execution time. The execution time does not include the I/O operations</span>
<span class="hljs-comment"># like talking with the client, sending the reply and so forth,</span>
<span class="hljs-comment"># but just the time needed to actually execute the command (this is the only</span>
<span class="hljs-comment"># stage of command execution where the thread is blocked and can not serve</span>
<span class="hljs-comment"># other requests in the meantime).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># You can configure the slow log with two parameters: one tells Redis</span>
<span class="hljs-comment"># what is the execution time, in microseconds, to exceed in order for the</span>
<span class="hljs-comment"># command to get logged, and the other parameter is the length of the</span>
<span class="hljs-comment"># slow log. When a new command is logged the oldest one is removed from the</span>
<span class="hljs-comment"># queue of logged commands.</span>

<span class="hljs-comment"># The following time is expressed in microseconds, so 1000000 is equivalent</span>
<span class="hljs-comment"># to one second. Note that a negative number disables the slow log, while</span>
<span class="hljs-comment"># a value of zero forces the logging of every command.</span>
slowlog-log-slower-than 10000

<span class="hljs-comment"># There is no limit to this length. Just be aware that it will consume memory.</span>
<span class="hljs-comment"># You can reclaim memory used by the slow log with SLOWLOG RESET.</span>
slowlog-max-len 128

<span class="hljs-comment">################################ LATENCY MONITOR ##############################</span>

<span class="hljs-comment"># The Redis latency monitoring subsystem samples different operations</span>
<span class="hljs-comment"># at runtime in order to collect data related to possible sources of</span>
<span class="hljs-comment"># latency of a Redis instance.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Via the LATENCY command this information is available to the user that can</span>
<span class="hljs-comment"># print graphs and obtain reports.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The system only logs operations that were performed in a time equal or</span>
<span class="hljs-comment"># greater than the amount of milliseconds specified via the</span>
<span class="hljs-comment"># latency-monitor-threshold configuration directive. When its value is set</span>
<span class="hljs-comment"># to zero, the latency monitor is turned off.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default latency monitoring is disabled since it is mostly not needed</span>
<span class="hljs-comment"># if you don&apos;t have latency issues, and collecting data has a performance</span>
<span class="hljs-comment"># impact, that while very small, can be measured under big load. Latency</span>
<span class="hljs-comment"># monitoring can easily be enabled at runtime using the command</span>
<span class="hljs-comment"># &quot;CONFIG SET latency-monitor-threshold &lt;milliseconds&gt;&quot; if needed.</span>
latency-monitor-threshold 0

<span class="hljs-comment">############################# EVENT NOTIFICATION ##############################</span>

<span class="hljs-comment"># Redis can notify Pub/Sub clients about events happening in the key space.</span>
<span class="hljs-comment"># This feature is documented at http://redis.io/topics/notifications</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># For instance if keyspace events notification is enabled, and a client</span>
<span class="hljs-comment"># performs a DEL operation on key &quot;foo&quot; stored in the Database 0, two</span>
<span class="hljs-comment"># messages will be published via Pub/Sub:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># PUBLISH __keyspace@0__:foo del</span>
<span class="hljs-comment"># PUBLISH __keyevent@0__:del foo</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># It is possible to select the events that Redis will notify among a set</span>
<span class="hljs-comment"># of classes. Every class is identified by a single character:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.</span>
<span class="hljs-comment">#  E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.</span>
<span class="hljs-comment">#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...</span>
<span class="hljs-comment">#  $     String commands</span>
<span class="hljs-comment">#  l     List commands</span>
<span class="hljs-comment">#  s     Set commands</span>
<span class="hljs-comment">#  h     Hash commands</span>
<span class="hljs-comment">#  z     Sorted set commands</span>
<span class="hljs-comment">#  x     Expired events (events generated every time a key expires)</span>
<span class="hljs-comment">#  e     Evicted events (events generated when a key is evicted for maxmemory)</span>
<span class="hljs-comment">#  A     Alias for g$lshzxe, so that the &quot;AKE&quot; string means all the events.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  The &quot;notify-keyspace-events&quot; takes as argument a string that is composed</span>
<span class="hljs-comment">#  of zero or multiple characters. The empty string means that notifications</span>
<span class="hljs-comment">#  are disabled.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  Example: to enable list and generic events, from the point of view of the</span>
<span class="hljs-comment">#           event name, use:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  notify-keyspace-events Elg</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  Example 2: to get the stream of the expired keys subscribing to channel</span>
<span class="hljs-comment">#             name __keyevent@0__:expired use:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  notify-keyspace-events Ex</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#  By default all notifications are disabled because most users don&apos;t need</span>
<span class="hljs-comment">#  this feature and the feature has some overhead. Note that if you don&apos;t</span>
<span class="hljs-comment">#  specify at least one of K or E, no events will be delivered.</span>
notify-keyspace-events <span class="hljs-string">&quot;&quot;</span>

<span class="hljs-comment">############################### ADVANCED CONFIG ###############################</span>

<span class="hljs-comment"># Hashes are encoded using a memory efficient data structure when they have a</span>
<span class="hljs-comment"># small number of entries, and the biggest entry does not exceed a given</span>
<span class="hljs-comment"># threshold. These thresholds can be configured using the following directives.</span>
<span class="hljs-built_in">hash</span>-max-ziplist-entries 512
<span class="hljs-built_in">hash</span>-max-ziplist-value 64

<span class="hljs-comment"># Lists are also encoded in a special way to save a lot of space.</span>
<span class="hljs-comment"># The number of entries allowed per internal list node can be specified</span>
<span class="hljs-comment"># as a fixed maximum size or a maximum number of elements.</span>
<span class="hljs-comment"># For a fixed maximum size, use -5 through -1, meaning:</span>
<span class="hljs-comment"># -5: max size: 64 Kb  &lt;-- not recommended for normal workloads</span>
<span class="hljs-comment"># -4: max size: 32 Kb  &lt;-- not recommended</span>
<span class="hljs-comment"># -3: max size: 16 Kb  &lt;-- probably not recommended</span>
<span class="hljs-comment"># -2: max size: 8 Kb   &lt;-- good</span>
<span class="hljs-comment"># -1: max size: 4 Kb   &lt;-- good</span>
<span class="hljs-comment"># Positive numbers mean store up to _exactly_ that number of elements</span>
<span class="hljs-comment"># per list node.</span>
<span class="hljs-comment"># The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),</span>
<span class="hljs-comment"># but if your use case is unique, adjust the settings as necessary.</span>
list-max-ziplist-size -2

<span class="hljs-comment"># Lists may also be compressed.</span>
<span class="hljs-comment"># Compress depth is the number of quicklist ziplist nodes from *each* side of</span>
<span class="hljs-comment"># the list to *exclude* from compression.  The head and tail of the list</span>
<span class="hljs-comment"># are always uncompressed for fast push/pop operations.  Settings are:</span>
<span class="hljs-comment"># 0: disable all list compression</span>
<span class="hljs-comment"># 1: depth 1 means &quot;don&apos;t start compressing until after 1 node into the list,</span>
<span class="hljs-comment">#    going from either the head or tail&quot;</span>
<span class="hljs-comment">#    So: [head]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[tail]</span>
<span class="hljs-comment">#    [head], [tail] will always be uncompressed; inner nodes will compress.</span>
<span class="hljs-comment"># 2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[tail]</span>
<span class="hljs-comment">#    2 here means: don&apos;t compress head or head-&gt;next or tail-&gt;prev or tail,</span>
<span class="hljs-comment">#    but compress all nodes between them.</span>
<span class="hljs-comment"># 3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]</span>
<span class="hljs-comment"># etc.</span>
list-compress-depth 0

<span class="hljs-comment"># Sets have a special encoding in just one case: when a set is composed</span>
<span class="hljs-comment"># of just strings that happen to be integers in radix 10 in the range</span>
<span class="hljs-comment"># of 64 bit signed integers.</span>
<span class="hljs-comment"># The following configuration setting sets the limit in the size of the</span>
<span class="hljs-comment"># set in order to use this special memory saving encoding.</span>
<span class="hljs-built_in">set</span>-max-intset-entries 512

<span class="hljs-comment"># Similarly to hashes and lists, sorted sets are also specially encoded in</span>
<span class="hljs-comment"># order to save a lot of space. This encoding is only used when the length and</span>
<span class="hljs-comment"># elements of a sorted set are below the following limits:</span>
zset-max-ziplist-entries 128
zset-max-ziplist-value 64

<span class="hljs-comment"># HyperLogLog sparse representation bytes limit. The limit includes the</span>
<span class="hljs-comment"># 16 bytes header. When an HyperLogLog using the sparse representation crosses</span>
<span class="hljs-comment"># this limit, it is converted into the dense representation.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># A value greater than 16000 is totally useless, since at that point the</span>
<span class="hljs-comment"># dense representation is more memory efficient.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The suggested value is ~ 3000 in order to have the benefits of</span>
<span class="hljs-comment"># the space efficient encoding without slowing down too much PFADD,</span>
<span class="hljs-comment"># which is O(N) with the sparse encoding. The value can be raised to</span>
<span class="hljs-comment"># ~ 10000 when CPU is not a concern, but space is, and the data set is</span>
<span class="hljs-comment"># composed of many HyperLogLogs with cardinality in the 0 - 15000 range.</span>
hll-sparse-max-bytes 3000

<span class="hljs-comment"># Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in</span>
<span class="hljs-comment"># order to help rehashing the main Redis hash table (the one mapping top-level</span>
<span class="hljs-comment"># keys to values). The hash table implementation Redis uses (see dict.c)</span>
<span class="hljs-comment"># performs a lazy rehashing: the more operation you run into a hash table</span>
<span class="hljs-comment"># that is rehashing, the more rehashing &quot;steps&quot; are performed, so if the</span>
<span class="hljs-comment"># server is idle the rehashing is never complete and some more memory is used</span>
<span class="hljs-comment"># by the hash table.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default is to use this millisecond 10 times every second in order to</span>
<span class="hljs-comment"># actively rehash the main dictionaries, freeing memory when possible.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># If unsure:</span>
<span class="hljs-comment"># use &quot;activerehashing no&quot; if you have hard latency requirements and it is</span>
<span class="hljs-comment"># not a good thing in your environment that Redis can reply from time to time</span>
<span class="hljs-comment"># to queries with 2 milliseconds delay.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># use &quot;activerehashing yes&quot; if you don&apos;t have such hard requirements but</span>
<span class="hljs-comment"># want to free memory asap when possible.</span>
activerehashing yes

<span class="hljs-comment"># The client output buffer limits can be used to force disconnection of clients</span>
<span class="hljs-comment"># that are not reading data from the server fast enough for some reason (a</span>
<span class="hljs-comment"># common reason is that a Pub/Sub client can&apos;t consume messages as fast as the</span>
<span class="hljs-comment"># publisher can produce them).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The limit can be set differently for the three different classes of clients:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># normal -&gt; normal clients including MONITOR clients</span>
<span class="hljs-comment"># slave  -&gt; slave clients</span>
<span class="hljs-comment"># pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The syntax of every client-output-buffer-limit directive is the following:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># client-output-buffer-limit &lt;class&gt; &lt;hard limit&gt; &lt;soft limit&gt; &lt;soft seconds&gt;</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># A client is immediately disconnected once the hard limit is reached, or if</span>
<span class="hljs-comment"># the soft limit is reached and remains reached for the specified number of</span>
<span class="hljs-comment"># seconds (continuously).</span>
<span class="hljs-comment"># So for instance if the hard limit is 32 megabytes and the soft limit is</span>
<span class="hljs-comment"># 16 megabytes / 10 seconds, the client will get disconnected immediately</span>
<span class="hljs-comment"># if the size of the output buffers reach 32 megabytes, but will also get</span>
<span class="hljs-comment"># disconnected if the client reaches 16 megabytes and continuously overcomes</span>
<span class="hljs-comment"># the limit for 10 seconds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default normal clients are not limited because they don&apos;t receive data</span>
<span class="hljs-comment"># without asking (in a push way), but just after a request, so only</span>
<span class="hljs-comment"># asynchronous clients may create a scenario where data is requested faster</span>
<span class="hljs-comment"># than it can read.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Instead there is a default limit for pubsub and slave clients, since</span>
<span class="hljs-comment"># subscribers and slaves receive data in a push fashion.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Both the hard or the soft limit can be disabled by setting them to zero.</span>
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit slave 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60

<span class="hljs-comment"># Client query buffers accumulate new commands. They are limited to a fixed</span>
<span class="hljs-comment"># amount by default in order to avoid that a protocol desynchronization (for</span>
<span class="hljs-comment"># instance due to a bug in the client) will lead to unbound memory usage in</span>
<span class="hljs-comment"># the query buffer. However you can configure it here if you have very special</span>
<span class="hljs-comment"># needs, such us huge multi/exec requests or alike.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># client-query-buffer-limit 1gb</span>

<span class="hljs-comment"># In the Redis protocol, bulk requests, that are, elements representing single</span>
<span class="hljs-comment"># strings, are normally limited ot 512 mb. However you can change this limit</span>
<span class="hljs-comment"># here.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># proto-max-bulk-len 512mb</span>

<span class="hljs-comment"># Redis calls an internal function to perform many background tasks, like</span>
<span class="hljs-comment"># closing connections of clients in timeout, purging expired keys that are</span>
<span class="hljs-comment"># never requested, and so forth.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Not all tasks are performed with the same frequency, but Redis checks for</span>
<span class="hljs-comment"># tasks to perform according to the specified &quot;hz&quot; value.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># By default &quot;hz&quot; is set to 10. Raising the value will use more CPU when</span>
<span class="hljs-comment"># Redis is idle, but at the same time will make Redis more responsive when</span>
<span class="hljs-comment"># there are many keys expiring at the same time, and timeouts may be</span>
<span class="hljs-comment"># handled with more precision.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The range is between 1 and 500, however a value over 100 is usually not</span>
<span class="hljs-comment"># a good idea. Most users should use the default of 10 and raise this up to</span>
<span class="hljs-comment"># 100 only in environments where very low latency is required.</span>
hz 10

<span class="hljs-comment"># When a child rewrites the AOF file, if the following option is enabled</span>
<span class="hljs-comment"># the file will be fsync-ed every 32 MB of data generated. This is useful</span>
<span class="hljs-comment"># in order to commit the file to the disk more incrementally and avoid</span>
<span class="hljs-comment"># big latency spikes.</span>
aof-rewrite-incremental-fsync yes

<span class="hljs-comment"># Redis LFU eviction (see maxmemory setting) can be tuned. However it is a good</span>
<span class="hljs-comment"># idea to start with the default settings and only change them after investigating</span>
<span class="hljs-comment"># how to improve the performances and how the keys LFU change over time, which</span>
<span class="hljs-comment"># is possible to inspect via the OBJECT FREQ command.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># There are two tunable parameters in the Redis LFU implementation: the</span>
<span class="hljs-comment"># counter logarithm factor and the counter decay time. It is important to</span>
<span class="hljs-comment"># understand what the two parameters mean before changing them.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The LFU counter is just 8 bits per key, it&apos;s maximum value is 255, so Redis</span>
<span class="hljs-comment"># uses a probabilistic increment with logarithmic behavior. Given the value</span>
<span class="hljs-comment"># of the old counter, when a key is accessed, the counter is incremented in</span>
<span class="hljs-comment"># this way:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1. A random number R between 0 and 1 is extracted.</span>
<span class="hljs-comment"># 2. A probability P is calculated as 1/(old_value*lfu_log_factor+1).</span>
<span class="hljs-comment"># 3. The counter is incremented only if R &lt; P.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default lfu-log-factor is 10. This is a table of how the frequency</span>
<span class="hljs-comment"># counter changes with a different number of accesses with different</span>
<span class="hljs-comment"># logarithmic factors:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | factor | 100 hits   | 1000 hits  | 100K hits  | 1M hits    | 10M hits   |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 0      | 104        | 255        | 255        | 255        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 1      | 18         | 49         | 255        | 255        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 10     | 10         | 18         | 142        | 255        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment"># | 100    | 8          | 11         | 49         | 143        | 255        |</span>
<span class="hljs-comment"># +--------+------------+------------+------------+------------+------------+</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> The above table was obtained by running the following commands:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment">#   redis-benchmark -n 1000000 incr foo</span>
<span class="hljs-comment">#   redis-cli object freq foo</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># NOTE 2: The counter initial value is 5 in order to give new objects a chance</span>
<span class="hljs-comment"># to accumulate hits.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The counter decay time is the time, in minutes, that must elapse in order</span>
<span class="hljs-comment"># for the key counter to be divided by two (or decremented if it has a value</span>
<span class="hljs-comment"># less &lt;= 10).</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The default value for the lfu-decay-time is 1. A Special value of 0 means to</span>
<span class="hljs-comment"># decay the counter every time it happens to be scanned.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># lfu-log-factor 10</span>
<span class="hljs-comment"># lfu-decay-time 1</span>

<span class="hljs-comment">########################### ACTIVE DEFRAGMENTATION #######################</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># WARNING THIS FEATURE IS EXPERIMENTAL. However it was stress tested</span>
<span class="hljs-comment"># even in production and manually tested by multiple engineers for some</span>
<span class="hljs-comment"># time.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># What is active defragmentation?</span>
<span class="hljs-comment"># -------------------------------</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Active (online) defragmentation allows a Redis server to compact the</span>
<span class="hljs-comment"># spaces left between small allocations and deallocations of data in memory,</span>
<span class="hljs-comment"># thus allowing to reclaim back memory.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Fragmentation is a natural process that happens with every allocator (but</span>
<span class="hljs-comment"># less so with Jemalloc, fortunately) and certain workloads. Normally a server</span>
<span class="hljs-comment"># restart is needed in order to lower the fragmentation, or at least to flush</span>
<span class="hljs-comment"># away all the data and create it again. However thanks to this feature</span>
<span class="hljs-comment"># implemented by Oran Agra for Redis 4.0 this process can happen at runtime</span>
<span class="hljs-comment"># in an &quot;hot&quot; way, while the server is running.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Basically when the fragmentation is over a certain level (see the</span>
<span class="hljs-comment"># configuration options below) Redis will start to create new copies of the</span>
<span class="hljs-comment"># values in contiguous memory regions by exploiting certain specific Jemalloc</span>
<span class="hljs-comment"># features (in order to understand if an allocation is causing fragmentation</span>
<span class="hljs-comment"># and to allocate it in a better place), and at the same time, will release the</span>
<span class="hljs-comment"># old copies of the data. This process, repeated incrementally for all the keys</span>
<span class="hljs-comment"># will cause the fragmentation to drop back to normal values.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># Important things to understand:</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 1. This feature is disabled by default, and only works if you compiled Redis</span>
<span class="hljs-comment">#    to use the copy of Jemalloc we ship with the source code of Redis.</span>
<span class="hljs-comment">#    This is the default with Linux builds.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 2. You never need to enable this feature if you don&apos;t have fragmentation</span>
<span class="hljs-comment">#    issues.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># 3. Once you experience fragmentation, you can enable this feature when</span>
<span class="hljs-comment">#    needed with the command &quot;CONFIG SET activedefrag yes&quot;.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># The configuration parameters are able to fine tune the behavior of the</span>
<span class="hljs-comment"># defragmentation process. If you are not sure about what they mean it is</span>
<span class="hljs-comment"># a good idea to leave the defaults untouched.</span>

<span class="hljs-comment"># Enabled active defragmentation</span>
<span class="hljs-comment"># activedefrag yes</span>

<span class="hljs-comment"># Minimum amount of fragmentation waste to start active defrag</span>
<span class="hljs-comment"># active-defrag-ignore-bytes 100mb</span>

<span class="hljs-comment"># Minimum percentage of fragmentation to start active defrag</span>
<span class="hljs-comment"># active-defrag-threshold-lower 10</span>

<span class="hljs-comment"># Maximum percentage of fragmentation at which we use maximum effort</span>
<span class="hljs-comment"># active-defrag-threshold-upper 100</span>

<span class="hljs-comment"># Minimal effort for defrag in CPU percentage</span>
<span class="hljs-comment"># active-defrag-cycle-min 25</span>

<span class="hljs-comment"># Maximal effort for defrag in CPU percentage</span>
<span class="hljs-comment"># active-defrag-cycle-max 75</span>
</code></pre>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; Mars&#x4E36;&#x5C0F;&#x77F3;&#x5934; 2018 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2018-09-27 10:43:14
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="120_Redis单机部署.html" class="navigation navigation-prev " aria-label="Previous page: Redis单机部署">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="131_我的常用配置文件.html" class="navigation navigation-next " aria-label="Next page: 我的常用配置文件">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Redis配置文件","level":"1.1.4.3","depth":3,"next":{"title":"我的常用配置文件","level":"1.1.4.4","depth":3,"path":"redis/131_我的常用配置文件.md","ref":"redis/131_我的常用配置文件.md","articles":[]},"previous":{"title":"Redis单机部署","level":"1.1.4.2","depth":3,"path":"redis/120_Redis单机部署.md","ref":"redis/120_Redis单机部署.md","articles":[]},"dir":"ltr"},"config":{"plugins":["highlight","-search","-sharing","fontsettings","-livereload","-lunr","search-pro-kui","-sharing-plus","-github","donate","splitter","anchor-navigation-ex","prism","-disqus","tbfed-pagefooter","favicon","-rss","expandable-chapters"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright © Mars丶小石头 2018","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"disqus":{"shortName":"http-localhost-4000-16"},"github":{"url":"https://github.com/bjddd192"},"splitter":{},"donate":{"alipay":"/images/支付宝收钱码.jpeg","alipayText":"支付宝赞赏","button":"赞赏","title":"","wechat":"/images/微信收钱码.jpeg","wechatText":"微信赞赏"},"fontsettings":{"family":"sans","size":2,"theme":"white"},"rss":{"title":"我的数据库管理手册电子书","description":"总结和分享我的数据库工作生涯中常用的经验与遇到的问题","author":"Mars丶小石头 <bjddd192@163.com>","feed_url":"http://gitbook.bjddd192.com/rss","site_url":"http://gitbook.bjddd912.com/","managingEditor":"bjddd192@163.com","webMaster":"bjddd192@163.com","categories":["gitbook"]},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":false,"float":{"floatIcon":"fa fa-navicon","level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"mode":"float","multipleH1":false,"pageTop":{"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"favicon":{"shortcut":"favicon.ico","bookmark":"favicon.ico"},"search-pro-kui":{},"sharing":{"qq":false,"all":["douban","facebook","google","hatenaBookmark","instapaper","line","linkedin","messenger","pocket","qq","qzone","stumbleupon","twitter","viber","vk","weibo","whatsapp"],"douban":false,"facebook":false,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":false,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"Mars丶小石头 <bjddd192@163.com>","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"isbn":"","variables":{},"title":"我的数据库管理手册电子书","language":"zh-hans","gitbook":"3.2.3","description":"总结和分享我的数据库工作生涯中常用的经验与遇到的问题"},"file":{"path":"redis/130_Redis配置文件.md","mtime":"2018-09-27T02:43:14.420Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-11-26T07:28:55.929Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro-kui/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro-kui/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    

    </body>
</html>

